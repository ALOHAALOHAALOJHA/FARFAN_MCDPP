{
  "metadata": {
    "version": "1.0.0",
    "date": "2025-12-31",
    "contract_id": "D04_CULTURA_Q013_CONTRACT",
    "question_id": "Q103",
    "original_question_id": "Q013",
    "policy_area_number": 4,
    "policy_area": "D04_CULTURA",
    "protocol": "PROMPT_MAESTRO_V1",
    "compliance": [
      "GNEA_v2.0.0",
      "EPISTEMOLOGICAL_GUIDE_V4"
    ],
    "schema_version": "v3"
  },
  "contract": {
    "contract_id": "D04_CULTURA_Q013_CONTRACT",
    "policy_area": "D04_CULTURA",
    "dimension_code": "D3",
    "question_id": "Q013",
    "question_type": "TYPE_A",
    "question_text": "¿Los productos están vinculados a códigos presupuestales (BPIN, PPI, SGP, recursos específicos) y a entidades responsables identificadas (secretarías, oficinas, dependencias)?",
    "question_title": "Trazabilidad presupuestal y organizacional",
    "method_binding": {
      "orchestration_mode": "epistemological_pipeline",
      "contract_type": "TYPE_A",
      "method_count": 12,
      "execution_phases": {
        "phase_A_construction": {
          "methods": [
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_normalize_text",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._normalize_text - Match score 0.53; provides ['raw_facts']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_find_sentence_boundary",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._find_sentence_boundary - Match score 0.53; provides ['raw_facts']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_extract_sections",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._extract_sections - Match score 0.53; provides ['raw_facts']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_extract_tables",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._extract_tables - Match score 0.53; provides ['raw_facts']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_extract_lists",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._extract_lists - Match score 0.53; provides ['raw_facts']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_find_section",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "raw_facts"
              ],
              "requires": [],
              "level": "N1-EMP",
              "description": "AdvancedSemanticChunker._find_section - Match score 0.53; provides ['raw_facts']"
            }
          ],
          "fusion_strategy": "semantic_bundling"
        },
        "phase_B_computation": {
          "methods": [
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_recursive_split",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "inferences"
              ],
              "requires": [
                "raw_facts"
              ],
              "level": "N2-INF",
              "description": "AdvancedSemanticChunker._recursive_split - Match score 0.46; provides ['inferences']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_infer_pdq_context",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "inferences"
              ],
              "requires": [
                "raw_facts"
              ],
              "level": "N2-INF",
              "description": "AdvancedSemanticChunker._infer_pdq_context - Match score 0.46; provides ['inferences']"
            },
            {
              "class_name": "BayesianNumericalAnalyzer",
              "method_name": "evaluate_policy_metric",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "inferences"
              ],
              "requires": [
                "raw_facts"
              ],
              "level": "N2-INF",
              "description": "BayesianNumericalAnalyzer.evaluate_policy_metric - Match score 0.46; provides ['inferences']"
            },
            {
              "class_name": "BayesianNumericalAnalyzer",
              "method_name": "_beta_binomial_posterior",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "inferences"
              ],
              "requires": [
                "raw_facts"
              ],
              "level": "N2-INF",
              "description": "BayesianNumericalAnalyzer._beta_binomial_posterior - Match score 0.46; provides ['inferences']"
            }
          ],
          "fusion_strategy": "dempster_shafer"
        },
        "phase_C_litigation": {
          "methods": [
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_contains_table",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "validated_constraints"
              ],
              "requires": [
                "inferences",
                "raw_facts"
              ],
              "level": "N3-AUD",
              "description": "AdvancedSemanticChunker._contains_table - Match score 0.43; provides ['validated_constraints']"
            },
            {
              "class_name": "AdvancedSemanticChunker",
              "method_name": "_contains_list",
              "mother_file": "src/methods_dispensary/embedding_policy.py",
              "provides": [
                "validated_constraints"
              ],
              "requires": [
                "inferences",
                "raw_facts"
              ],
              "level": "N3-AUD",
              "description": "AdvancedSemanticChunker._contains_list - Match score 0.43; provides ['validated_constraints']"
            }
          ],
          "fusion_strategy": "contradiction_veto"
        }
      }
    },
    "evidence_assembly": {
      "engine": "EVIDENCE_NEXUS",
      "module": "farfan_pipeline.phases.Phase_two.evidence_nexus",
      "class_name": "EvidenceNexus",
      "method_name": "assemble",
      "assembly_rules": [
        {
          "rule_id": "R1_semantic_bundling",
          "rule_type": "empirical_basis",
          "target": "semantic_bundles",
          "merge_strategy": "semantic_bundling",
          "output_type": "FACT"
        },
        {
          "rule_id": "R2_dempster_combination",
          "rule_type": "corroboration",
          "target": "belief_mass",
          "merge_strategy": "dempster_shafer",
          "output_type": "PARAMETER"
        },
        {
          "rule_id": "R3_contradiction_veto",
          "rule_type": "robustness_gate",
          "target": "validated_belief",
          "merge_strategy": "contradiction_veto",
          "output_type": "CONSTRAINT"
        },
        {
          "rule_id": "R4_synthesis",
          "rule_type": "synthesis",
          "target": "human_answer",
          "merge_strategy": "carver_doctoral_synthesis",
          "output_type": "NARRATIVE"
        }
      ]
    },
    "epistemological_justification": "Bundling preserva contexto semántico",
    "fusion_strategies": {
      "n1": "semantic_bundling",
      "n2": "dempster_shafer",
      "n3": "contradiction_veto"
    },
    "n1_strategy_refined": {
      "name": "semantic_bundling",
      "operation": "Agrupa evidencia preservando contexto semántico",
      "differs_from_concat": "Mantiene metadata de fuente y contexto",
      "output": "Bundle con trazabilidad semántica",
      "example": {
        "input": [
          {
            "source": "DANE",
            "text": "tasa 45.3%",
            "context": "párrafo 12"
          },
          {
            "source": "Med Legal",
            "text": "12 casos",
            "context": "tabla 3"
          }
        ],
        "output": {
          "bundle_type": "semantic",
          "facts": [],
          "provenance": "preserved"
        }
      }
    },
    "n2_strategy_refined": {
      "name": "dempster_shafer",
      "operation": "Combina masas de probabilidad con gestión de conflicto",
      "rationale": "Maneja incertidumbre + conflicto semántico",
      "conflict_resolution": "Dempster's rule of combination"
    },
    "n3_fusion_refined": {
      "name": "contradiction_veto",
      "operation": "Veto duro si contradicción semántica detectada",
      "formula": "if semantic_contradiction: confidence = 0.0"
    }
  }
}