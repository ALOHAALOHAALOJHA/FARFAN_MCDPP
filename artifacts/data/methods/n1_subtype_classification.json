{
  "metadata": {
    "version": "1.0.0",
    "specification_source": "episte_refact.md Section 2.2",
    "purpose": "Enforce ontological purity of N1 layer",
    "created": "2024-12-31",
    "description": "Classifies N1 methods into N1a-OBS (direct observation) vs N1b-CTX (model context/state)"
  },
  "n1a_obs_criteria": {
    "description": "Direct empirical observation from documents",
    "inclusion_rules": [
      "Method reads directly from PreprocessedDocument or raw document text",
      "Output are literals: strings, numbers, lists of observed entities",
      "NO interpretive transformation performed",
      "Data source is PDT document (chunks, text, tables)"
    ],
    "valid_patterns": [
      "extract_.*_from_.*text",
      "parse_.*_table",
      "detect_.*entities",
      "identify_.*statements",
      "AdvancedSemanticChunker",
      "TextMiningEngine",
      "CausalLinkExtractor",
      "TableParser"
    ],
    "exclusion_patterns": [
      ".*load.*history",
      ".*load.*config",
      ".*get.*prior",
      ".*retrieve.*model",
      "ConfigLoader.*",
      ".*uncertainty.*",
      ".*state.*"
    ]
  },
  "n1b_ctx_criteria": {
    "description": "Model context/state (not pure observation)",
    "inclusion_rules": [
      "Method reads from model state, priors, or history",
      "Output are epistemic commitments (priors, uncertainties, configurations)",
      "Data source is computational context, not document"
    ],
    "valid_patterns": [
      ".*load.*history",
      ".*load.*config",
      ".*get.*prior",
      ".*retrieve.*model",
      "ConfigLoader.*",
      ".*uncertainty.*",
      ".*state.*"
    ],
    "confidence_penalty": 0.6,
    "rationale": "Model state is second-order epistemology - not direct observation"
  },
  "n1_rejection_criteria": {
    "description": "Methods that should NEVER be classified as N1",
    "reject_patterns": [
      ".*calculate.*",
      ".*compute.*",
      ".*aggregate.*",
      ".*combine.*",
      ".*update.*",
      ".*evaluate.*",
      ".*analyze.*",
      ".*score.*",
      ".*validate.*",
      ".*test.*"
    ],
    "correct_level": "N2-INF",
    "rationale": "These methods perform computation/inference, not extraction"
  },
  "classification_rules": {
    "decision_tree": {
      "description": "Per episte_refact.md Section 2.3 Decision Tree",
      "steps": [
        {
          "step": 1,
          "question": "Is method classified as N1-EMP?",
          "yes": {
            "step": 2,
            "question": "Does method read from document/PreprocessedMetadata directly?",
            "yes": {
              "classification": "N1a-OBS",
              "confidence_multiplier": 1.0,
              "rationale": "Pure observation - full confidence"
            },
            "no": {
              "step": 3,
              "question": "Does method read from model state/priors/history?",
              "yes": {
                "classification": "N1b-CTX",
                "confidence_multiplier": 0.6,
                "rationale": "Model context - reduced confidence"
              },
              "no": {
                "classification": "REJECT",
                "action": "Reclassify as N2-INF or N3-AUD",
                "rationale": "Misclassified - not pure N1"
              }
            }
          }
        }
      ]
    }
  },
  "method_examples": {
    "n1a_obs_valid": [
      {
        "method_id": "AdvancedSemanticChunker.chunk_text",
        "rationale": "Reads directly from document text, produces literal chunks"
      },
      {
        "method_id": "CausalLinkExtractor.extract_causal_links",
        "rationale": "Extracts observable causal statements from document"
      },
      {
        "method_id": "TableParser.parse_financial_table",
        "rationale": "Reads literal table data from document"
      }
    ],
    "n1b_ctx_degraded": [
      {
        "method_id": "ConfigLoader._load_uncertainty_history",
        "rationale": "Reads model state, not document - should be N1b-CTX with 0.6 penalty",
        "correct_action": "Reduce N1 confidence by 40% or reclassify as N2-INF"
      },
      {
        "method_id": "PolicyAnalyzer._get_prior_distribution",
        "rationale": "Retrieves model priors, not observation - N1b-CTX"
      }
    ],
    "n1_reject_reclassify": [
      {
        "method_id": "BayesianNumericalAnalyzer._normal_normal_posterior",
        "rationale": "Performs Bayesian computation - should be N2-INF, not N1"
      },
      {
        "method_id": "ScoringEngine._calculate_aggregate_score",
        "rationale": "Computes aggregate scores - should be N2-INF"
      }
    ]
  }
}
