{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://farfan.pipeline/schemas/membership-criteria-v2.0.0",
  "_schema_version": "2.0.0",
  "_description": "JSON Schema for Membership Criteria definitions",
  
  "type": "object",
  "required": ["criterion_id", "name", "signal_type", "detection", "scoring_impact"],
  "properties": {
    "criterion_id": {
      "type": "string",
      "pattern": "^MC[0-9]{2}$",
      "description": "Unique ID (MC01-MC10)"
    },
    "name": {
      "type": "string",
      "minLength": 3
    },
    "description_es": {"type": "string"},
    "description_en": {"type": "string"},
    "signal_type": {
      "type": "string",
      "enum": [
        "STRUCTURAL_MARKER",
        "QUANTITATIVE_TRIPLET",
        "NORMATIVE_REFERENCE",
        "PROGRAMMATIC_HIERARCHY",
        "FINANCIAL_CHAIN",
        "POPULATION_DISAGGREGATION",
        "TEMPORAL_MARKER",
        "CAUSAL_LINK",
        "INSTITUTIONAL_ENTITY",
        "SEMANTIC_RELATIONSHIP"
      ]
    },
    "detection": {
      "type": "object",
      "required": ["primary_method"],
      "properties": {
        "primary_method": {
          "type": "string",
          "enum": ["REGEX", "KEYWORD_SET", "COMPOUND_PATTERN", "NER", "EMBEDDING_SIMILARITY"]
        },
        "components": {"type": "array"},
        "aggregation_rules": {"type": "object"}
      }
    },
    "validation": {
      "type": "object",
      "properties": {
        "rules": {"type": "array"}
      }
    },
    "scoring_impact": {
      "type": "object",
      "properties": {
        "dimension_boost": {"type": "object"},
        "cross_cutting_boost": {"type": "object"}
      }
    },
    "required_capabilities": {
      "type": "array",
      "items": {"type": "string"}
    },
    "testing": {
      "type": "object",
      "properties": {
        "test_file": {"type": "string"},
        "expected_precision": {"type": "number"},
        "expected_recall": {"type": "number"}
      }
    }
  }
}
