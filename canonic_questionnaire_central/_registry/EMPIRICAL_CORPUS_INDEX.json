{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "empirical-corpus-index-v2.0.0",
  "_meta": {
    "schema_version": "2.0.0",
    "generated_at": "2026-01-06T20:00:00Z",
    "generator": "CQC Empirical Corpus Integration System",
    "purpose": "Master index for empirical calibration data from 14 real PDT plans"
  },

  "corpus_metadata": {
    "corpus_id": "PDT_COLOMBIA_2024_2027_EMPIRICAL_BASELINE",
    "version": "4.0.0",
    "creation_date": "2026-01-06",
    "source": "Google Notebook LM Batch Analysis + Expert Enhancement",
    "plans_analyzed": 14,
    "total_pages": 2956,
    "geographic_coverage": ["Cauca", "Caquet√°", "Choc√≥", "Cesar"],
    "statistical_power": {
      "sample_size": 14,
      "confidence_level": 0.90,
      "representative_of": "Small municipalities (<100k) in conflict-affected regions"
    }
  },

  "empirical_files": {
    "extractor_calibration": {
      "file": "_registry/membership_criteria/_calibration/extractor_calibration.json",
      "original_source": "corpus_empirico_calibracion_extractores.json",
      "size_kb": 25,
      "purpose": "Calibration data for signal extractors (MC01-MC10)",
      "contains": [
        "Empirical frequencies of 10 signal types across 14 plans",
        "Regex patterns calibrated with real data",
        "Confidence thresholds validated empirically",
        "Gold standard examples for each signal type",
        "Library specifications (pdfplumber, spaCy, etc.)"
      ],
      "used_by": [
        "StructuralMarkerExtractor (Phase 1-SP2)",
        "QuantitativeTripletExtractor (Phase 1-SP6)",
        "NormativeReferenceExtractor (Phase 1-SP5)",
        "FinancialChainExtractor (Phase 1-SP7)",
        "CausalVerbExtractor (Phase 1-SP10)",
        "InstitutionalNER (Phase 1-SP11)"
      ],
      "critical_for": "Extractor accuracy and confidence scoring"
    },

    "integration_map": {
      "file": "_registry/questions/integration_map.json",
      "original_source": "corpus_empirico_integrado.json",
      "size_kb": 47,
      "purpose": "Complete mapping Q001-Q305 ‚Üí Signal Types",
      "contains": [
        "300 micro questions mapped to signal types",
        "30 generic slots (D1-Q1 to D6-Q5) √ó 10 Policy Areas",
        "Scoring modalities per question",
        "Expected signal counts per question",
        "MESO/MACRO aggregation rules",
        "Interdependencies between questions"
      ],
      "used_by": [
        "QuestionnaireSignalRegistry (Phase 2)",
        "IrrigationSynchronizer (Phase 2)",
        "EvidenceNexus (Phase 2)",
        "DimensionAggregator (Phase 4)",
        "PolicyAreaAggregator (Phase 5)",
        "ClusterAggregator (Phase 6)"
      ],
      "critical_for": "Signal routing and irrigation to correct consumers"
    },

    "normative_compliance": {
      "file": "_registry/entities/normative_compliance.json",
      "original_source": "corpus_empirico_normatividad.json",
      "size_kb": 8.5,
      "purpose": "Mandatory normative requirements per Policy Area",
      "contains": [
        "Obligatory norms per PA (Ley 1448, Acuerdo de Paz, etc.)",
        "Penalties for missing norms",
        "Validation rules for normative compliance",
        "Empirical norm citation frequencies",
        "Compliance thresholds per PA"
      ],
      "used_by": [
        "NormativeReferenceExtractor (Phase 1-SP5)",
        "@p PolicyAreaScorer (Phase 3)",
        "CrossCuttingScorer (Phase 3)",
        "PolicyAreaAggregator (Phase 5)"
      ],
      "critical_for": "Normative compliance validation and PA scoring"
    },

    "empirical_weights": {
      "file": "scoring/calibration/empirical_weights.json",
      "original_source": "corpus_thresholds_weights.json",
      "size_kb": 11,
      "purpose": "Empirically calibrated thresholds and aggregation weights",
      "contains": [
        "Confidence thresholds per signal type",
        "Aggregation weights Phases 3-7",
        "Capability requirements per signal",
        "Scoring modality formulas (TYPE_A, B, C, D)",
        "Dimension/PA/Cluster weights",
        "Cross-cutting boost factors"
      ],
      "used_by": [
        "All Phase 3 Scorers (@b, @p, @q, @d, @u, @chain)",
        "DimensionAggregator (Phase 4)",
        "PolicyAreaAggregator (Phase 5)",
        "ClusterAggregator (Phase 6)",
        "MacroAggregator (Phase 7)"
      ],
      "critical_for": "Accurate scoring and aggregation with empirical validation"
    }
  },

  "usage_workflow": {
    "step1_extractor_initialization": {
      "action": "Load extractor_calibration.json",
      "extractors_configure": [
        "CPPStructuralParser ‚Üí table/section detection patterns",
        "QuantitativeTripletExtractor ‚Üí LB/Meta/A√±o patterns",
        "NormativeReferenceExtractor ‚Üí norm citation patterns",
        "FinancialChainExtractor ‚Üí budget chain patterns",
        "CausalVerbExtractor ‚Üí causal verb patterns",
        "InstitutionalNER ‚Üí entity recognition patterns"
      ],
      "output": "Extractors ready with empirically validated patterns"
    },

    "step2_question_signal_mapping": {
      "action": "Load integration_map.json",
      "system_configures": [
        "QuestionnaireSignalRegistry with Q‚ÜíSignal mappings",
        "IrrigationSynchronizer with routing rules",
        "Expected signal counts per question"
      ],
      "output": "Signal routing configured for 300 questions"
    },

    "step3_normative_compliance_setup": {
      "action": "Load normative_compliance.json",
      "validators_configure": [
        "NormativeComplianceValidator",
        "@p PolicyAreaScorer with required norms",
        "Penalty calculators for missing norms"
      ],
      "output": "Normative compliance system ready"
    },

    "step4_scoring_calibration": {
      "action": "Load empirical_weights.json",
      "scorers_configure": [
        "All Phase 3 scorers with empirical weights",
        "Aggregators Phases 4-7 with calibrated formulas",
        "Threshold validators with confidence levels"
      ],
      "output": "Scoring system calibrated with empirical data"
    }
  },

  "empirical_baseline_metrics": {
    "current_alignment_score": 0.029,
    "target_alignment_phase1": 0.50,
    "target_alignment_phase2": 0.70,
    "target_alignment_phase3": 0.85,
    "bottleneck": "Only 992 expected_elements used vs 10,563 available resources",
    "solution": "Full signal type integration + pattern enrichment enabled by these files"
  },

  "integration_status": {
    "extractor_calibration": {
      "integrated": true,
      "location": "_registry/membership_criteria/_calibration/",
      "linked_to": ["MC01-MC10 definitions", "Phase 1 extractors"],
      "consumers": [
        "StructuralMarkerExtractor (ACTIVE)",
        "FinancialChainExtractor (ACTIVE)",
        "InstitutionalNERExtractor (ACTIVE)",
        "CausalVerbExtractor (ACTIVE)",
        "QuantitativeTripletExtractor (ACTIVE)",
        "NormativeReferenceExtractor (ACTIVE)"
      ],
      "implementation_date": "2026-01-06",
      "status": "FULLY_IRRIGATED"
    },
    "integration_map": {
      "integrated": true,
      "location": "_registry/questions/",
      "linked_to": ["QuestionnaireSignalRegistry", "IrrigationSynchronizer"],
      "consumers": [
        "signal_router.py (ACTIVE)",
        "EvidenceNexus._get_expected_signals() (ACTIVE)",
        "IrrigationSynchronizer (INDIRECT via SignalRegistry)"
      ],
      "implementation_date": "2026-01-06",
      "status": "FULLY_IRRIGATED"
    },
    "normative_compliance": {
      "integrated": true,
      "location": "_registry/entities/",
      "linked_to": ["normative.json entities", "@p scorer", "CC_COHERENCIA_NORMATIVA"],
      "consumers": [
        "NormativeComplianceValidator (ACTIVE - phase3_10_00_normative_compliance_validator.py)",
        "SystemicGapDetector (ACTIVE - phase7_10_00_systemic_gap_detector.py)"
      ],
      "implementation_date": "2026-01-12",
      "status": "NEWLY_IRRIGATED"
    },
    "empirical_weights": {
      "integrated": true,
      "location": "scoring/calibration/",
      "linked_to": ["All scorers", "Aggregators Phases 4-7"],
      "consumers": [
        "EmpiricalThresholdsLoader (ACTIVE - phase3_10_00_empirical_thresholds_loader.py)",
        "SignalEnrichedScorer (ACTIVE - imports EmpiricalThresholdsLoader)",
        "AggregationSettings.from_empirical_corpus() (ACTIVE - phase4_10_00_aggregation.py)"
      ],
      "implementation_date": "2026-01-12",
      "status": "NEWLY_IRRIGATED"
    }
  },

  "irrigation_changelog": {
    "2026-01-12": {
      "action": "Empirical Corpus Strategic Irrigation - 4 points",
      "changes": [
        "‚úÖ Created NormativeComplianceValidator in Phase 3 (phase3_10_00_normative_compliance_validator.py)",
        "‚úÖ Created EmpiricalThresholdsLoader for Phase 3 scoring (phase3_10_00_empirical_thresholds_loader.py)",
        "‚úÖ Connected SignalEnrichedScorer to empirical thresholds",
        "‚úÖ Created AggregationSettings.from_empirical_corpus() for Phase 5 weights",
        "‚úÖ Created SystemicGapDetector with normative baseline for Phase 7 (phase7_10_00_systemic_gap_detector.py)"
      ],
      "files_created": [
        "src/farfan_pipeline/phases/Phase_3/phase3_10_00_normative_compliance_validator.py",
        "src/farfan_pipeline/phases/Phase_3/phase3_10_00_empirical_thresholds_loader.py",
        "src/farfan_pipeline/phases/Phase_7/phase7_10_00_systemic_gap_detector.py"
      ],
      "files_modified": [
        "src/farfan_pipeline/phases/Phase_3/phase3_10_00_phase3_signal_enriched_scoring.py",
        "src/farfan_pipeline/phases/Phase_4/phase4_10_00_aggregation.py"
      ],
      "value_added": [
        "Phase 3: Normative compliance validation with penalty calculation (score = 1.0 - SUM(penalties))",
        "Phase 3: Empirical confidence thresholds calibrated from 14 real PDT plans",
        "Phase 5: Dimension weights differentiated by empirical coverage (DIM04=0.25 vs DIM01=0.15)",
        "Phase 7: Systemic gap detection prioritized by mandatory norm violations (CRITICAL/HIGH/MEDIUM/LOW)"
      ]
    }
  },

  "next_steps": [
    "‚úÖ Wire Phase 3 to consume normative_compliance.json (COMPLETED 2026-01-12)",
    "‚úÖ Wire Phase 3 scoring to empirical thresholds (COMPLETED 2026-01-12)",
    "‚úÖ Wire Phase 5 AreaPolicyAggregator to empirical weights (COMPLETED 2026-01-12)",
    "‚úÖ Wire Phase 7 SGD to normative baseline (COMPLETED 2026-01-12)",
    "üîÑ Update orchestrator to use AggregationSettings.from_empirical_corpus()",
    "üîÑ Update MacroAggregator.identify_systemic_gaps() to use SystemicGapDetector",
    "üìù Document usage patterns for new validators in developer guide"
  ]
}
