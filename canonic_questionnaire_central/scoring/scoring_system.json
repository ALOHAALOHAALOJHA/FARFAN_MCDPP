{
  "_comment": "Canonical Scoring System Configuration",
  "_comment_aligned_with": "Phase Three primitives (src/farfan_pipeline/phases/Phase_three/primitives/)",
  "_version": "2.0.0",
  "_generated_at": "2026-01-01T00:00:00Z",

  "micro_levels": [
    {
      "level": "EXCELENTE",
      "color": "green",
      "min_score": 0.85,
      "_aligned_with": "Phase Three QualityLevel.EXCELENTE"
    },
    {
      "level": "BUENO",
      "color": "blue",
      "min_score": 0.70,
      "_aligned_with": "Phase Three QualityLevel.GOOD (Spanish canonical)"
    },
    {
      "level": "ACEPTABLE",
      "color": "yellow",
      "min_score": 0.55,
      "_aligned_with": "Phase Three QualityLevel.ADEQUATE (Spanish canonical)"
    },
    {
      "level": "INSUFICIENTE",
      "color": "red",
      "min_score": 0.0,
      "_aligned_with": "Phase Three QualityLevel.POOR (Spanish canonical)"
    }
  ],

  "modalities": {
    "MESO_INTEGRATION": {
      "description": "Cluster-level integration scoring (evaluates policy coherence across policy areas within a cluster)",
      "max_score": 3,
      "aggregation": "weighted_average_with_coherence_bonus",
      "threshold": 0.65,
      "use_case": "meso questions evaluating cross-policy area integration",
      "weights": {
        "policy_area_coverage": 0.4,
        "cross_references": 0.3,
        "narrative_coherence": 0.3
      },
      "coherence_bonus": {
        "enabled": true,
        "max_bonus": 0.15,
        "criteria": "Explicit cross-references between 2+ policy areas in cluster"
      },
      "_aligned_with": "Phase Three cluster aggregation logic"
    },
    "MACRO_HOLISTIC": {
      "description": "Macro-level holistic assessment (evaluates overall plan coherence across all dimensions and clusters)",
      "max_score": 3,
      "aggregation": "holistic_weighted_synthesis",
      "threshold": 0.70,
      "use_case": "macro question evaluating entire plan vision and integration",
      "weights": {
        "cluster_integration": 0.35,
        "dimension_completeness": 0.25,
        "long_term_vision": 0.20,
        "narrative_coherence": 0.20
      },
      "holistic_criteria": {
        "minimum_cluster_scores": 4,
        "minimum_dimension_scores": 5,
        "cross_cluster_linkages": 3,
        "strategic_vision_explicit": true
      },
      "_aligned_with": "Phase Three macro aggregation logic"
    },
    "TYPE_A": {
      "description": "Quantitative indicators (high threshold, precise)",
      "max_score": 3,
      "aggregation": "presence_threshold",
      "threshold": 0.7,
      "use_case": "numeric indicators, budgets, goals",
      "_aligned_with": "Phase Three score_type_a()"
    },
    "TYPE_B": {
      "description": "Qualitative descriptors (medium threshold, patterns)",
      "max_score": 3,
      "aggregation": "binary_sum",
      "threshold": 0.65,
      "use_case": "institutional actors, policy instruments",
      "_aligned_with": "Phase Three score_type_b()"
    },
    "TYPE_C": {
      "description": "Mixed evidence (balanced weights)",
      "max_score": 3,
      "aggregation": "presence_threshold",
      "threshold": 0.5,
      "use_case": "mixed quantitative/qualitative questions",
      "_aligned_with": "Phase Three score_type_c()"
    },
    "TYPE_D": {
      "description": "Temporal series (sequence-aware)",
      "max_score": 3,
      "aggregation": "weighted_sum",
      "threshold": 0.65,
      "weights": [0.4, 0.3, 0.3],
      "use_case": "time series, historical trends",
      "_aligned_with": "Phase Three score_type_d()"
    },
    "TYPE_E": {
      "description": "Territorial coverage (spatial)",
      "max_score": 3,
      "aggregation": "binary_presence",
      "threshold": 0.65,
      "use_case": "geographic distribution, regional policies",
      "_aligned_with": "Phase Three score_type_e()"
    },
    "TYPE_F": {
      "description": "Institutional actors (relational)",
      "max_score": 3,
      "aggregation": "normalized_continuous",
      "threshold": 0.65,
      "normalization": "minmax",
      "use_case": "actor networks, governance structures",
      "_aligned_with": "Phase Three score_type_f()"
    }
  },

  "modality_definitions": {
    "MESO_INTEGRATION": {
      "aggregation": "weighted_average_with_coherence_bonus",
      "description": "Cluster integration score = (weighted avg of policy area scores) + coherence bonus",
      "failure_code": "F-MESO-MIN",
      "threshold": 0.65,
      "weights": {
        "policy_area_coverage": 0.4,
        "cross_references": 0.3,
        "narrative_coherence": 0.3
      },
      "formula": "SCORE = (0.4 * coverage + 0.3 * cross_ref + 0.3 * coherence) + bonus",
      "bonus_criteria": "bonus = 0.15 if cross_references >= 2, else 0"
    },
    "MACRO_HOLISTIC": {
      "aggregation": "holistic_weighted_synthesis",
      "description": "Macro holistic score = weighted synthesis of cluster, dimension, vision, and narrative scores",
      "failure_code": "F-MACRO-MIN",
      "threshold": 0.70,
      "weights": {
        "cluster_integration": 0.35,
        "dimension_completeness": 0.25,
        "long_term_vision": 0.20,
        "narrative_coherence": 0.20
      },
      "formula": "SCORE = 0.35 * cluster_avg + 0.25 * dim_complete + 0.20 * vision + 0.20 * narrative",
      "minimum_requirements": {
        "min_clusters_passing": 4,
        "min_dimensions_passing": 5,
        "min_cross_linkages": 3
      }
    },
    "TYPE_A": {
      "aggregation": "presence_threshold",
      "description": "Count 4 elements and scale to 0-3",
      "failure_code": "F-A-MIN",
      "threshold": 0.7,
      "weights": [0.5, 0.3, 0.2]
    },
    "TYPE_B": {
      "aggregation": "binary_sum",
      "description": "Count up to 3 elements, each worth 1 point",
      "failure_code": "F-B-MIN",
      "max_score": 3,
      "weights": [0.4, 0.3, 0.3]
    },
    "TYPE_C": {
      "aggregation": "presence_threshold",
      "description": "Count 2 elements and scale to 0-3",
      "failure_code": "F-C-MIN",
      "threshold": 0.5,
      "weights": [0.33, 0.34, 0.33]
    },
    "TYPE_D": {
      "aggregation": "weighted_sum",
      "description": "Count 3 elements, weighted",
      "failure_code": "F-D-MIN",
      "threshold": 0.65,
      "weights": [0.4, 0.3, 0.3]
    },
    "TYPE_E": {
      "aggregation": "binary_presence",
      "description": "Boolean presence check",
      "failure_code": "F-E-MIN",
      "threshold": 0.65
    },
    "TYPE_F": {
      "aggregation": "normalized_continuous",
      "description": "Continuous scale",
      "failure_code": "F-F-MIN",
      "threshold": 0.65,
      "normalization": "minmax"
    }
  },

  "quality_level_mapping": {
    "completeness_to_quality": {
      "complete": "EXCELENTE",
      "partial": "ACEPTABLE",
      "insufficient": "INSUFICIENTE",
      "not_applicable": "NO_APLICABLE",
      "_aligned_with": "Phase Three map_completeness_to_quality()"
    },
    "score_to_quality": {
      "excellent_min": 0.85,
      "good_min": 0.70,
      "adequate_min": 0.55,
      "_aligned_with": "Phase Three determine_quality_level()"
    }
  },

  "invariants": {
    "INV-SC-001": "All scores must be in range [0.0, 1.0]",
    "INV-SC-002": "Quality level must be deterministic from score",
    "INV-SC-003": "Scoring metadata must include modality and threshold",
    "INV-SC-004": "Normalized scores must be in range [0, 100]"
  }
}
