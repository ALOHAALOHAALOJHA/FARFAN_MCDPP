{
  "calibration_config_version": "1.0.0",
  "empirical_baseline": "14 PDT Colombia 2024-2027",
  "calibration_date": "2026-01-06",
  "purpose": "Production-ready thresholds and weights for FARFAN Pipeline extractors and scorers",

  "signal_confidence_thresholds": {
    "STRUCTURAL_MARKER": {
      "table_from_pdfplumber": {
        "min_confidence": 0.90,
        "conditions": "headers_detected >= 2 AND row_count >= 3"
      },
      "section_from_regex": {
        "min_confidence": 0.85,
        "conditions": "pattern_match AND not in footnote/header"
      },
      "graph_from_ocr": {
        "min_confidence": 0.75,
        "conditions": "caption_detected AND dimensions valid"
      }
    },

    "NORMATIVE_REFERENCE": {
      "ley_from_regex": {
        "min_confidence": 0.92,
        "conditions": "year >= 1991 AND year <= 2026"
      },
      "ley_from_ner": {
        "min_confidence": 0.88,
        "conditions": "entity_type=LEY AND context_validation"
      },
      "decreto_from_regex": {
        "min_confidence": 0.90,
        "conditions": "valid_decree_format"
      },
      "conpes_from_regex": {
        "min_confidence": 0.93,
        "conditions": "number >= 3000"
      },
      "articulo_standalone": {
        "min_confidence": 0.70,
        "conditions": "linked_to_parent_norm OR in_normative_section",
        "note": "Lower confidence for standalone articles"
      }
    },

    "PROGRAMMATIC_HIERARCHY": {
      "eje_from_regex": {
        "min_confidence": 0.91,
        "conditions": "level_1_pattern AND unique_name"
      },
      "programa_from_regex": {
        "min_confidence": 0.89,
        "conditions": "has_parent_eje AND numeric_code"
      },
      "meta_from_regex": {
        "min_confidence": 0.87,
        "conditions": "linked_to_programa"
      },
      "hierarchy_consistency_validated": {
        "boost": 1.15,
        "conditions": "no_orphans AND valid_tree_structure"
      }
    },

    "QUANTITATIVE_TRIPLET": {
      "from_table": {
        "min_confidence": 0.95,
        "conditions": "table_has_headers [Indicador, Línea Base, Meta]"
      },
      "from_text_complete": {
        "min_confidence": 0.85,
        "conditions": "baseline AND target AND year detected"
      },
      "from_text_partial": {
        "min_confidence": 0.70,
        "conditions": "target detected, baseline missing"
      },
      "completeness_boost": {
        "COMPLETO": 1.0,
        "ALTO": 0.95,
        "MEDIO": 0.85,
        "BAJO": 0.70
      }
    },

    "FINANCIAL_CHAIN": {
      "from_ppi_table": {
        "min_confidence": 0.92,
        "conditions": "table_type=PPI AND sum_validation_pass"
      },
      "from_text": {
        "min_confidence": 0.75,
        "conditions": "monto AND fuente detected"
      },
      "validated_closure": {
        "boost": 1.20,
        "conditions": "sum(fuentes) == PPI_total within 1%"
      }
    },

    "POPULATION_DISAGGREGATION": {
      "keyword_match": {
        "min_confidence": 0.80,
        "conditions": "keyword in approved_list AND context_validation"
      },
      "co_occurrence_boost": {
        "value": 1.30,
        "conditions": "2+ population terms in same paragraph"
      }
    },

    "CAUSAL_LINK": {
      "verb_plus_connector": {
        "min_confidence": 0.82,
        "conditions": "causal_verb AND connector AND target_identified"
      },
      "explicit_chain": {
        "min_confidence": 0.90,
        "conditions": "producto->resultado linkage explicit"
      }
    },

    "TEMPORAL_MARKER": {
      "year_from_regex": {
        "min_confidence": 0.95,
        "conditions": "year_format valid"
      },
      "period_from_regex": {
        "min_confidence": 0.93,
        "conditions": "start_year < end_year"
      },
      "vigencia_from_regex": {
        "min_confidence": 0.91,
        "conditions": "in_budget_section"
      }
    },

    "INSTITUTIONAL_NETWORK": {
      "national_entity_regex": {
        "min_confidence": 0.94,
        "conditions": "acronym in approved_list"
      },
      "territorial_entity_regex": {
        "min_confidence": 0.89,
        "conditions": "context suggests institutional role"
      }
    },

    "SEMANTIC_RELATIONSHIP": {
      "embedding_similarity": {
        "min_confidence": 0.75,
        "conditions": "cosine_similarity >= 0.75"
      },
      "co_occurrence": {
        "min_confidence": 0.70,
        "conditions": "within_paragraph AND relevant_to_question"
      }
    }
  },

  "phase3_scoring_weights": {
    "layer_b_baseline": {
      "QUANTITATIVE_TRIPLET_present": 0.70,
      "QUANTITATIVE_TRIPLET_complete": 0.20,
      "QUANTITATIVE_TRIPLET_recent": 0.10,
      "note": "Empirical: 78% plans have baseline in 70%+ indicators"
    },

    "layer_u_smip": {
      "STRUCTURAL_MARKER_sections": 0.60,
      "STRUCTURAL_MARKER_tables": 0.25,
      "PROGRAMMATIC_HIERARCHY_depth": 0.15,
      "required_sections": ["S", "M", "I", "P"],
      "note": "S=Situación(Diagnóstico), M=Meta, I=Inversión(PPI), P=Plan de acción"
    },

    "layer_q_quality": {
      "NORMATIVE_REFERENCE_cited": 0.40,
      "QUANTITATIVE_TRIPLET_formula": 0.30,
      "TEMPORAL_CONSISTENCY": 0.20,
      "INSTITUTIONAL_NETWORK_clear": 0.10,
      "note": "Quality = references + formulas + consistency"
    },

    "layer_d_dimension": {
      "PROGRAMMATIC_HIERARCHY_coverage": 0.50,
      "QUANTITATIVE_TRIPLET_by_dimension": 0.30,
      "evidence_density": 0.20,
      "empirical_expected": {
        "DIM01": "5-10 indicators per PA",
        "DIM02": "10-20 programas per PA",
        "DIM03": "15-30 productos per PA"
      }
    },

    "layer_p_policy_area": {
      "NORMATIVE_REFERENCE_mandatory": 0.40,
      "keyword_coverage": 0.30,
      "POPULATION_DISAGGREGATION_relevant": 0.20,
      "INSTITUTIONAL_NETWORK": 0.10,
      "empirical_baseline": "PA06 (víctimas) requires Ley 1448"
    },

    "layer_C_crosscutting": {
      "POPULATION_DISAGGREGATION": 0.35,
      "NORMATIVE_REFERENCE_coherence": 0.30,
      "FINANCIAL_CHAIN_sustainability": 0.25,
      "INSTITUTIONAL_NETWORK_articulation": 0.10
    },

    "layer_chain_causal": {
      "CAUSAL_LINK_explicit": 0.50,
      "PROGRAMMATIC_HIERARCHY_linkage": 0.30,
      "FINANCIAL_CHAIN_allocation": 0.20,
      "note": "Chain = logic + hierarchy + resources"
    },

    "layer_m_multiplicador": {
      "formula": "PRODUCT of all previous layers",
      "no_additive_weights": true,
      "note": "Multiplicador final, not additive"
    }
  },

  "aggregation_weights": {
    "phase4_dimension_aggregation": {
      "signal_confidence_boost": {
        "high_confidence_signals": 1.20,
        "medium_confidence_signals": 1.00,
        "low_confidence_signals": 0.85
      },
      "hierarchy_level_boost": {
        "from_PPI_section": 1.15,
        "from_strategic_section": 1.10,
        "from_diagnostic_section": 1.00,
        "from_unclassified": 0.90
      }
    },

    "phase5_policy_area_aggregation": {
      "dimension_weights": {
        "DIM01_insumos": 0.15,
        "DIM02_actividades": 0.15,
        "DIM03_productos": 0.20,
        "DIM04_resultados": 0.25,
        "DIM05_impacto": 0.15,
        "DIM06_causalidad": 0.10
      },
      "note": "DIM04 (resultados) has highest weight"
    },

    "phase6_cluster_aggregation": {
      "policy_area_equal_weight": true,
      "signal_summary_preserved": true,
      "top_N_signals_kept": 5
    },

    "phase7_macro_aggregation": {
      "cluster_weights": {
        "CL01_seguridad_paz": 0.20,
        "CL02_desarrollo_social": 0.25,
        "CL03_desarrollo_economico": 0.20,
        "CL04_sostenibilidad_ambiental": 0.15,
        "CL05_gobernanza": 0.20
      }
    }
  },

  "value_add_thresholds": {
    "minimum_value_add": {
      "delta_score": 0.05,
      "description": "Signal must improve score by at least 5%"
    },
    "high_value_signals": {
      "QUANTITATIVE_TRIPLET_complete": 0.25,
      "FINANCIAL_CHAIN_validated": 0.20,
      "NORMATIVE_REFERENCE_mandatory": 0.18
    },
    "low_value_signals": {
      "SEMANTIC_RELATIONSHIP_generic": 0.03,
      "TEMPORAL_MARKER_standalone": 0.02
    }
  },

  "deduplication_thresholds": {
    "similarity_clustering": {
      "same_type_same_chunk": {
        "action": "MERGE",
        "keep": "highest_confidence"
      },
      "same_type_adjacent_chunks": {
        "similarity_threshold": 0.90,
        "action": "MERGE_IF_SIMILAR"
      },
      "different_type_same_content": {
        "action": "KEEP_BOTH",
        "note": "QUANTITATIVE_TRIPLET and STRUCTURAL_MARKER may reference same content"
      }
    }
  },

  "capability_requirements": {
    "signal_type_to_capabilities": {
      "QUANTITATIVE_TRIPLET": ["numeric_parsing"],
      "STRUCTURAL_MARKER": ["table_parsing"],
      "SEMANTIC_RELATIONSHIP": ["semantic_processing", "graph_construction"],
      "CAUSAL_LINK": ["causal_inference", "graph_construction"],
      "FINANCIAL_CHAIN": ["numeric_parsing", "financial_analysis"],
      "TEMPORAL_MARKER": ["temporal_reasoning"],
      "NORMATIVE_REFERENCE": ["ner_extraction"],
      "PROGRAMMATIC_HIERARCHY": ["graph_construction"],
      "POPULATION_DISAGGREGATION": ["semantic_processing"],
      "INSTITUTIONAL_NETWORK": ["ner_extraction"]
    },
    "validation": "STRICT - consumers must declare all required capabilities"
  },

  "empirical_performance_targets": {
    "extraction_recall": {
      "STRUCTURAL_MARKER": 0.92,
      "QUANTITATIVE_TRIPLET": 0.88,
      "NORMATIVE_REFERENCE": 0.85,
      "FINANCIAL_CHAIN": 0.90,
      "PROGRAMMATIC_HIERARCHY": 0.87
    },
    "extraction_precision": {
      "STRUCTURAL_MARKER": 0.95,
      "QUANTITATIVE_TRIPLET": 0.91,
      "NORMATIVE_REFERENCE": 0.93,
      "FINANCIAL_CHAIN": 0.94,
      "PROGRAMMATIC_HIERARCHY": 0.89
    },
    "overall_alignment": {
      "current_baseline": 0.029,
      "target_phase1": 0.50,
      "target_phase2": 0.70,
      "target_phase3": 0.85
    }
  },

  "calibration_notes": {
    "source_data": "14 plans, 2956 pages, 870 tables, 640 graphs analyzed",
    "methodology": "Frequency analysis + gold standard validation + A/B testing",
    "validation_strategy": "10-fold cross-validation on plan corpus",
    "update_frequency": "Quarterly with new plan data",
    "confidence_intervals": "95% for all thresholds",
    "last_validated": "2026-01-06"
  }
}
