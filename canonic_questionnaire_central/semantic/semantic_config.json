{
  "_version": "2.1.0",
  "_generated_at": "2026-01-08T13:50:00Z",
  "_description": "Enhanced semantic processing configuration for FARFAN questionnaire analysis with PDET municipality context",
  "_pdet_enrichment_metadata": "semantic/pdet_semantic_enrichment.json",
  "_pdet_data_source": "colombia_context/pdet_municipalities.json",

  "disambiguation": {
    "confidence_threshold": 0.72,
    "entity_linker": "spaCy_es_core_news_lg",
    "fallback_threshold": 0.60,
    "context_window": 3,
    "disambiguation_strategies": [
      {
        "strategy": "contextual_embedding",
        "weight": 0.5,
        "description": "Use sentence embeddings to disambiguate based on context"
      },
      {
        "strategy": "entity_type_matching",
        "weight": 0.3,
        "description": "Match entity types (ORG, LOC, PERSON) to expected types"
      },
      {
        "strategy": "glossary_lookup",
        "weight": 0.2,
        "description": "Use glossary metadata for Colombian policy terms"
      }
    ]
  },

  "embedding_strategy": {
    "model": "multilingual-e5-base",
    "dimension": 768,
    "pooling_strategy": "mean",
    "normalize": true,
    "hybrid": {
      "enabled": true,
      "bm25": true,
      "fusion": "RRF",
      "weights": {
        "semantic": 0.7,
        "lexical": 0.3
      }
    },
    "batch_size": 32,
    "max_seq_length": 512
  },

  "named_entity_recognition": {
    "enabled": true,
    "model": "spaCy_es_core_news_lg",
    "entity_types": [
      "ORG",
      "LOC",
      "PERSON",
      "DATE",
      "MONEY",
      "PERCENT",
      "QUANTITY"
    ],
    "custom_entities": {
      "COLOMBIAN_INSTITUTION": {
        "examples": ["DNP", "DANE", "ART", "OCAD Paz", "Secretaría de Planeación"],
        "pattern_file": "patterns/institutional_patterns.json"
      },
      "POLICY_INSTRUMENT": {
        "examples": ["PND", "PDM", "PATR", "PPI", "CONPES"],
        "pattern_file": "patterns/policy_instrument_patterns.json"
      },
      "TERRITORIAL_UNIT": {
        "examples": ["municipio", "departamento", "vereda", "corregimiento", "resguardo"],
        "pattern_file": "patterns/territorial_patterns.json"
      },
      "PDET_SUBREGION": {
        "examples": ["Alto Patía y Norte del Cauca", "Montes de María", "Catatumbo", "Arauca"],
        "pattern_file": "patterns/territorial_patterns.json",
        "description": "16 PDET subregions for territorial context",
        "total_count": 16
      },
      "PDET_MUNICIPALITY": {
        "examples": ["Jambaló", "López de Micay", "Piamonte", "Tumaco"],
        "pattern_file": "patterns/territorial_patterns.json",
        "description": "170 PDET municipalities prioritized for peace implementation",
        "total_count": 170,
        "data_source": "colombia_context/pdet_municipalities.json"
      }
    },
    "min_confidence": 0.65
  },

  "semantic_similarity": {
    "similarity_metric": "cosine",
    "min_similarity_threshold": 0.75,
    "reranking": {
      "enabled": true,
      "model": "cross-encoder/ms-marco-MiniLM-L-12-v2",
      "top_k": 10
    },
    "caching": {
      "enabled": true,
      "cache_size": 10000,
      "ttl_hours": 24
    }
  },

  "pattern_matching": {
    "match_types": {
      "REGEX": {
        "case_sensitive": false,
        "multiline": true,
        "flags": "IGNORECASE|MULTILINE"
      },
      "LITERAL": {
        "case_sensitive": false,
        "fuzzy_matching": {
          "enabled": true,
          "max_edit_distance": 2
        }
      },
      "NER_OR_REGEX": {
        "priority": "NER_first",
        "fallback_to_regex": true
      }
    },
    "context_scopes": {
      "SENTENCE": {"max_chars": 500},
      "PARAGRAPH": {"max_chars": 2000},
      "SECTION": {"max_chars": 5000},
      "DOCUMENT": {"max_chars": null}
    }
  },

  "text_preprocessing": {
    "lowercase": false,
    "remove_accents": false,
    "remove_stopwords": false,
    "lemmatization": {
      "enabled": true,
      "pos_tags": ["NOUN", "VERB", "ADJ"]
    },
    "tokenization": {
      "tokenizer": "spaCy",
      "preserve_entities": true
    }
  },

  "colombian_context_awareness": {
    "territorial_disambiguation": {
      "enabled": true,
      "use_municipal_registry": true,
      "prioritize_pdet_municipalities": true,
      "pdet_data_file": "colombia_context/pdet_municipalities.json",
      "pdet_context_description": "170 PDET municipalities across 16 subregions for territorial targeting"
    },
    "institutional_normalization": {
      "enabled": true,
      "normalize_acronyms": true,
      "expand_abbreviations": true,
      "reference_file": "colombia_context/municipal_governance.json"
    },
    "policy_framework_linking": {
      "enabled": true,
      "link_to_legal_framework": true,
      "link_to_pnd": true,
      "link_to_ods": true
    },
    "pdet_enrichment": {
      "enabled": true,
      "total_municipalities": 170,
      "total_subregions": 16,
      "data_source": "colombia_context/pdet_municipalities.json",
      "subregions": [
        "Alto Patía y Norte del Cauca",
        "Arauca",
        "Bajo Cauca y Nordeste Antioqueño",
        "Catatumbo",
        "Chocó",
        "Cuenca del Caguán y Piedemonte Caqueteño",
        "Macarena-Guaviare",
        "Montes de María",
        "Pacífico y Frontera Nariñense",
        "Pacífico Medio",
        "Putumayo",
        "Sierra Nevada-Perijá-Zona Bananera",
        "Sur de Bolívar",
        "Sur de Córdoba",
        "Sur del Tolima",
        "Urabá Antioqueño"
      ],
      "policy_area_mappings": {
        "PA01_Gender": ["SR04", "SR05", "SR08"],
        "PA02_Violence_Security": "all_subregions",
        "PA03_Environment": ["SR03", "SR05", "SR07", "SR11"],
        "PA04_Economic_Development": ["SR01", "SR02", "SR04", "SR06", "SR10"],
        "PA05_Victims_Restitution": "all_subregions",
        "PA06_Children_Youth": ["SR01", "SR03", "SR08", "SR09"],
        "PA07_Peace_Building": "all_subregions",
        "PA08_Human_Rights": ["SR02", "SR04", "SR07", "SR09"],
        "PA09_Justice": ["SR01", "SR05", "SR11", "SR13"],
        "PA10_International": ["SR02", "SR05", "SR11"]
      },
      "pdet_pillars": {
        "pillar_1": {
          "name": "Ordenamiento Social de la Propiedad",
          "dimension": "Structural"
        },
        "pillar_2": {
          "name": "Infraestructura y Adecuación de Tierras",
          "dimension": "Instrumental"
        },
        "pillar_3": {
          "name": "Salud Rural",
          "dimension": "Substantive"
        },
        "pillar_4": {
          "name": "Educación Rural",
          "dimension": "Procedural"
        },
        "pillar_5": {
          "name": "Vivienda, Agua Potable y Saneamiento Básico",
          "dimension": "Substantive"
        },
        "pillar_6": {
          "name": "Reactivación Económica y Producción Agropecuaria",
          "dimension": "Instrumental"
        },
        "pillar_7": {
          "name": "Seguridad Alimentaria y Nutrición",
          "dimension": "Substantive"
        },
        "pillar_8": {
          "name": "Reconciliación, Convivencia y Construcción de Paz",
          "dimension": "Symbolic"
        }
      },
      "enrichment_gates": {
        "gate_1_scope": "Consumers must have 'pdet_context' or 'ENRICHMENT_DATA' in allowed signal types",
        "gate_2_value_add": "PDET context provides 25% value-add for municipalities, 20% for subregions, 30% for policy mappings",
        "gate_3_capability": "Requires SEMANTIC_PROCESSING and TABLE_PARSING capabilities",
        "gate_4_channel": "Flow ID: PDET_MUNICIPALITY_ENRICHMENT, documented in README_PDET_ENRICHMENT.md"
      }
    }
  },

  "quality_thresholds": {
    "minimum_text_length": 50,
    "maximum_text_length": 10000,
    "minimum_keyword_matches": 2,
    "minimum_pattern_confidence": 0.65,
    "minimum_entity_confidence": 0.70
  },

  "performance_optimization": {
    "use_gpu": false,
    "max_workers": 4,
    "batch_processing": true,
    "async_processing": false,
    "memory_limit_mb": 2048
  }
}
