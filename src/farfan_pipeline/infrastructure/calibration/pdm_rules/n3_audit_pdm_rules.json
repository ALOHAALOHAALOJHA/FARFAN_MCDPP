{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://farfan.pipeline/schemas/calibration/pdm/n3_rules.json",
  "rule_set": "N3_AUDIT_PDM_RULES",
  "name": "N3 Audit Veto PDM Sensitivity Rules",
  "version": "1.0.0-epistemic",
  "description": "PDM-driven parameter adjustments for N3-AUD (Audit/Falsification) layer. These rules adjust veto thresholds and audit strictness based on document structural characteristics.",

  "epistemic_layer": {
    "level": "N3-AUD",
    "name": "Audit/Falsification",
    "output_type": "CONSTRAINT",
    "fusion_behavior": "gate",
    "constitutional_constraint": "PDM adjustments CANNOT change the epistemic level, only parameter values",
    "asymmetry_principle": "N3 can veto N1/N2, but N1/N2 CANNOT veto N3 [CI-04]"
  },

  "pdm_triggers": {
    "description": "Document structural characteristics that trigger PDM adjustments",
    "triggers": [
      {
        "id": "FINANCIAL_DATA_DETECTED",
        "name": "Financial Data Present",
        "description": "Document contains financial budgets, allocations, or fiscal data",
        "detection_method": "financial_data_analysis",
        "indicators": ["budget", "allocation", "fiscal", "financial", "$", "COP", "millions"]
      },
      {
        "id": "TEMPORAL_LOGIC_REQUIRED",
        "name": "Temporal Ordering Detected",
        "description": "Document contains temporal sequences requiring consistency validation",
        "detection_method": "temporal_structure_analysis",
        "indicators": ["phase", "stage", "period", "year", "timeline", "sequence"]
      },
      {
        "id": "HIGH_STAKES_CLAIMS",
        "name": "High-Stakes Policy Claims",
        "description": "Document contains high-stakes claims requiring strict validation",
        "detection_method": "stakes_analysis",
        "threshold": 0.8
      },
      {
        "id": "QUANTITATIVE_PRECISION_REQUIRED",
        "name": "Quantitative Precision Required",
        "description": "Document makes precise quantitative claims requiring strict audit",
        "detection_method": "precision_analysis",
        "indicators": ["%", "rate", "index", "coefficient", "ratio"]
      }
    ]
  },

  "adjustment_rules": [
    {
      "rule_id": "N3-PDM-001",
      "name": "Financial Strictness Increase",
      "trigger": "FINANCIAL_DATA_DETECTED",
      "adjustment": {
        "parameter": "financial_strictness",
        "operation": "set",
        "value": 1.5,
        "description": "Increase financial validation strictness to 1.5x"
      },
      "justification": "Financial data warrants enhanced audit scrutiny",
      "validation": {
        "min_value": 1.0,
        "max_value": 3.0,
        "constraint": "Strictness must be >= 1.0"
      }
    },
    {
      "rule_id": "N3-PDM-002",
      "name": "Veto Threshold Strictening",
      "trigger": "FINANCIAL_DATA_DETECTED",
      "adjustment": {
        "parameter": "veto_threshold_partial",
        "operation": "set",
        "value": 0.6,
        "description": "Lower partial veto threshold to 0.6 for financial data"
      },
      "justification": "Financial claims require stricter veto thresholds",
      "validation": {
        "min_value": 0.0,
        "max_value": 1.0,
        "constraint": "Threshold must be in [0, 1]"
      }
    },
    {
      "rule_id": "N3-PDM-003",
      "name": "Temporal Logic Validation Activation",
      "trigger": "TEMPORAL_LOGIC_REQUIRED",
      "adjustment": {
        "parameter": "temporal_logic_required",
        "operation": "set",
        "value": true,
        "description": "Enable temporal consistency validation"
      },
      "justification": "Temporal claims require temporal logic checking",
      "validation": {
        "type": "boolean",
        "constraint": "Must be boolean true/false"
      }
    },
    {
      "rule_id": "N3-PDM-004",
      "name": "High-Stakes Strictness",
      "trigger": "HIGH_STAKES_CLAIMS",
      "adjustment": {
        "parameter": "significance_level",
        "operation": "set",
        "value": 0.01,
        "description": "Lower significance level to 0.01 for high-stakes claims"
      },
      "justification": "High-stakes claims require more stringent validation",
      "validation": {
        "min_value": 0.001,
        "max_value": 0.1,
        "constraint": "Significance must be in (0, 0.1]"
      }
    },
    {
      "rule_id": "N3-PDM-005",
      "name": "Quantitative Precision Strictening",
      "trigger": "QUANTITATIVE_PRECISION_REQUIRED",
      "adjustment": {
        "parameter": "veto_threshold_critical",
        "operation": "set",
        "value": 0.1,
        "description": "Raise critical veto threshold to 0.1 for precision requirements"
      },
      "justification": "Quantitative precision claims require more forgiving veto",
      "note": "Counter-intuitive: higher critical threshold = less strict critical veto",
      "validation": {
        "min_value": 0.0,
        "max_value": 1.0,
        "constraint": "Threshold must be in [0, 1]"
      }
    }
  ],

  "composite_rules": [
    {
      "rule_id": "N3-PDM-COMPOSITE-001",
      "name": "Financial Temporal Document",
      "description": "Apply strictest adjustments for documents with financial data AND temporal logic",
      "trigger_conditions": {
        "operator": "AND",
        "conditions": [
          "FINANCIAL_DATA_DETECTED",
          "TEMPORAL_LOGIC_REQUIRED"
        ]
      },
      "adjustments": [
        {"ref": "N3-PDM-001"},
        {"ref": "N3-PDM-002"},
        {"ref": "N3-PDM-003"}
      ],
      "priority": "CRITICAL",
      "note": "This combination represents the strictest audit regime"
    },
    {
      "rule_id": "N3-PDM-COMPOSITE-002",
      "name": "High-Stakes Quantitative Document",
      "description": "Apply adjustments for high-stakes quantitative claims",
      "trigger_conditions": {
        "operator": "AND",
        "conditions": [
          "HIGH_STAKES_CLAIMS",
          "QUANTITATIVE_PRECISION_REQUIRED"
        ]
      },
      "adjustments": [
        {"ref": "N3-PDM-004"},
        {"ref": "N3-PDM-005"}
      ],
      "priority": "HIGH"
    }
  ],

  "veto_gate_behavior": {
    "description": "N3 veto gate implementation details",
    "asymmetry_principle": {
      "description": "N3 can veto N1/N2, but N1/N2 CANNOT veto N3",
      "implementation": "Unidirectional veto gate"
    },
    "veto_actions": [
      {
        "action": "CRITICAL_VETO",
        "condition": "confidence <= veto_threshold_critical",
        "multiplier": 0.0,
        "status": "SUPPRESSED"
      },
      {
        "action": "PARTIAL_VETO",
        "condition": "veto_threshold_critical < confidence <= veto_threshold_partial",
        "multiplier": 0.5,
        "status": "ATTENUATED"
      },
      {
        "action": "APPROVED",
        "condition": "confidence > veto_threshold_partial",
        "multiplier": 1.0,
        "status": "VALIDATED"
      }
    ]
  },

  "constraints": [
    {
      "constraint": "LEVEL_IMMUTABILITY",
      "description": "PDM adjustments CANNOT change the epistemic level from N3-AUD",
      "enforcement": "Post-adjustment validation"
    },
    {
      "constraint": "PARAMETER_BOUNDS",
      "description": "All adjustments must respect parameter bounds from level config",
      "enforcement": "Pre-adjustment validation"
    },
    {
      "constraint": "ASYMMETRY_PRINCIPLE",
      "description": "N3 can veto N1/N2, but N1/N2 CANNOT veto N3 [CI-04]",
      "enforcement": "Architectural enforcement in fusion logic"
    },
    {
      "constraint": "CRITICAL_BELOW_PARTIAL",
      "description": "veto_threshold_critical must be < veto_threshold_partial",
      "enforcement": "Runtime validation"
    }
  ],

  "metadata": {
    "created": "2025-01-15",
    "last_modified": "2025-01-15",
    "author": "FARFAN Calibration Team",
    "review_status": "CONSTITUTIONAL",
    "schema_compliance": "EPISTEMIC-v4.0.0"
  }
}
