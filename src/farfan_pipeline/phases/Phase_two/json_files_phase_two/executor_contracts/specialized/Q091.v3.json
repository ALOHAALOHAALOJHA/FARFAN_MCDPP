{
  "identity": {
    "base_slot": "D1-Q1",
    "question_id": "Q091",
    "question_global": 91,
    "dimension_id": "DIM01",
    "policy_area_id": "PA10",
    "cluster_id": "CL04",
    "contract_version": "3.0.0",
    "contract_hash": "",
    "created_at": "2025-12-18T12:00:00.000000+00:00",
    "updated_at": "2025-12-18T12:00:00.000000+00:00",
    "validated_against_schema": "executor_contract.v3.schema.json"
  },
  "executor_binding": {
    "executor_class": "D1_Q1_Executor",
    "executor_module": "farfan_core.core.orchestrator.executors"
  },
  "method_binding": {
    "orchestration_mode": "multi_method_pipeline",
    "method_count": 17,
    "note": "All methods from D1_Q1_Executor for quantitative baseline extraction",
    "methods": [
      { "class_name": "TextMiningEngine", "method_name": "diagnose_critical_links", "priority": 1, "provides": "text_mining.diagnose_critical_links", "role": "diagnose_critical_links_diagnosis" },
      { "class_name": "TextMiningEngine", "method_name": "_analyze_link_text", "priority": 2, "provides": "text_mining.analyze_link_text", "role": "_analyze_link_text_analysis" },
      { "class_name": "IndustrialPolicyProcessor", "method_name": "process", "priority": 3, "provides": "industrial_policy.process", "role": "process_processing" },
      { "class_name": "IndustrialPolicyProcessor", "method_name": "_match_patterns_in_sentences", "priority": 4, "provides": "industrial_policy.match_patterns_in_sentences", "role": "_match_patterns_in_sentences_matching" },
      { "class_name": "IndustrialPolicyProcessor", "method_name": "_extract_point_evidence", "priority": 5, "provides": "industrial_policy.extract_point_evidence", "role": "_extract_point_evidence_extraction" },
      { "class_name": "CausalExtractor", "method_name": "_extract_goals", "priority": 6, "provides": "causal_extraction.extract_goals", "role": "_extract_goals_extraction" },
      { "class_name": "CausalExtractor", "method_name": "_parse_goal_context", "priority": 7, "provides": "causal_extraction.parse_goal_context", "role": "_parse_goal_context_parsing" },
      { "class_name": "FinancialAuditor", "method_name": "_parse_amount", "priority": 8, "provides": "financial_audit.parse_amount", "role": "_parse_amount_parsing" },
      { "class_name": "PDETMunicipalPlanAnalyzer", "method_name": "_extract_financial_amounts", "priority": 9, "provides": "pdet_analysis.extract_financial_amounts", "role": "_extract_financial_amounts_extraction" },
      { "class_name": "PDETMunicipalPlanAnalyzer", "method_name": "_extract_from_budget_table", "priority": 10, "provides": "pdet_analysis.extract_from_budget_table", "role": "_extract_from_budget_table_extraction" },
      { "class_name": "PolicyContradictionDetector", "method_name": "_extract_quantitative_claims", "priority": 11, "provides": "contradiction_detection.extract_quantitative_claims", "role": "_extract_quantitative_claims_extraction" },
      { "class_name": "PolicyContradictionDetector", "method_name": "_parse_number", "priority": 12, "provides": "contradiction_detection.parse_number", "role": "_parse_number_parsing" },
      { "class_name": "PolicyContradictionDetector", "method_name": "_statistical_significance_test", "priority": 13, "provides": "contradiction_detection.statistical_significance_test", "role": "_statistical_significance_test_execution" },
      { "class_name": "BayesianNumericalAnalyzer", "method_name": "evaluate_policy_metric", "priority": 14, "provides": "bayesian_analysis.evaluate_policy_metric", "role": "evaluate_policy_metric_evaluation" },
      { "class_name": "BayesianNumericalAnalyzer", "method_name": "compare_policies", "priority": 15, "provides": "bayesian_analysis.compare_policies", "role": "compare_policies_comparison" },
      { "class_name": "SemanticProcessor", "method_name": "chunk_text", "priority": 16, "provides": "semantic_processing.chunk_text", "role": "chunk_text_chunking" },
      { "class_name": "SemanticProcessor", "method_name": "embed_single", "priority": 17, "provides": "semantic_processing.embed_single", "role": "embed_single_embedding" }
    ]
  },
  "compatibility": {
    "questionnaire_monolith_version": "3.0.0",
    "method_executor_min_version": "1.0.0",
    "orchestrator_min_version": "1.0.0",
    "phase2_types_version": "1.0.0",
    "signal_registry_min_version": "1.0.0"
  },
  "error_handling": {
    "failure_contract": {
      "abort_if": ["missing_required_element", "incomplete_text"],
      "emit_code": "ABORT-Q091-REQ"
    },
    "on_assembly_failure": "propagate_with_trace",
    "on_method_failure": "propagate_with_trace",
    "on_method_not_found": "raise"
  },
  "evidence_assembly": {
    "class_name": "EvidenceNexus",
    "engine": "EVIDENCE_NEXUS",
    "method_name": "process",
    "module": "canonic_phases.Phase_two.evidence_nexus",
    "assembly_rules": [
      {
        "description": "Combine all evidence elements from method invocations",
        "merge_strategy": "concat",
        "sources": [
          "text_mining.diagnose_critical_links",
          "text_mining.analyze_link_text",
          "industrial_policy.process",
          "industrial_policy.match_patterns_in_sentences",
          "industrial_policy.extract_point_evidence",
          "causal_extraction.extract_goals",
          "causal_extraction.parse_goal_context",
          "financial_audit.parse_amount",
          "pdet_analysis.extract_financial_amounts",
          "pdet_analysis.extract_from_budget_table",
          "contradiction_detection.extract_quantitative_claims",
          "contradiction_detection.parse_number",
          "contradiction_detection.statistical_significance_test",
          "bayesian_analysis.evaluate_policy_metric",
          "bayesian_analysis.compare_policies",
          "semantic_processing.chunk_text",
          "semantic_processing.embed_single"
        ],
        "target": "elements_found"
      },
      { "description": "Aggregate confidence scores", "merge_strategy": "weighted_mean", "sources": [], "target": "confidence_scores", "default": [] },
      { "description": "Combine pattern matches", "merge_strategy": "concat", "sources": ["text_mining.diagnose_critical_links", "industrial_policy.match_patterns_in_sentences"], "target": "pattern_matches", "default": {} },
      { "description": "Combine metadata for traceability", "merge_strategy": "concat", "sources": [], "target": "metadata" }
    ],
    "output_schema": {
      "type": "object",
      "required": ["elements_found", "raw_results"],
      "properties": {
        "elements_found": { "description": "Evidence nodes from graph", "type": "array" },
        "raw_results": { "description": "Raw method outputs", "type": "object", "additionalProperties": true }
      },
      "additionalProperties": true
    }
  },
  "fallback_strategy": {
    "note": "No fallback strategies enabled. All failures propagate according to error_handling configuration.",
    "use_heuristics": false,
    "use_llm_direct": false
  },
  "output_contract": {
    "result_type": "Phase2QuestionResult",
    "consumer_modules": [
      "src.farfan_core.core.phases.phase2_types.validate_phase2_result",
      "src.farfan_core.core.orchestrator.core.Orchestrator._score_micro_results_async",
      "src.farfan_core.analysis.scoring.MicroQuestionScorer"
    ],
    "schema": {
      "type": "object",
      "required": ["base_slot", "question_id", "question_global", "evidence", "validation"],
      "properties": {
        "base_slot": { "const": "D1-Q1", "type": "string" },
        "question_id": { "const": "Q091", "type": "string" },
        "question_global": { "const": 91, "type": "integer" },
        "dimension_id": { "const": "DIM01", "type": ["string", "null"] },
        "policy_area_id": { "const": "PA10", "type": ["string", "null"] },
        "cluster_id": { "const": "CL04", "type": ["string", "null"] },
        "evidence": { "type": ["object", "null"], "additionalProperties": true },
        "validation": { "type": ["object", "null"], "additionalProperties": true },
        "trace": { "type": ["object", "null"], "additionalProperties": true },
        "metadata": { "type": ["object", "null"], "additionalProperties": true }
      },
      "additionalProperties": false
    }
  },
  "question_context": {
    "dimension_label": "INSUMOS",
    "policy_area_label": "Migración transfronteriza",
    "question_type": "micro",
    "question_text": "¿El diagnóstico presenta datos numéricos (flujo de migrantes, número de PPT expedidos, NNA migrantes en el sistema escolar) sobre el área de Migración transfronteriza que sirvan como línea base? Se debe verificar el año y fuentes (ej. Migración Colombia, DANE, Personería).",
    "scoring_modality": "TYPE_A",
    "scoring_definition_ref": "scoring_modalities.TYPE_A",
    "expected_output_type": "score",
    "modality": null,
    "expected_elements": [
      { "type": "cobertura_territorial_especificada", "required": true, "minimum": 1 },
      { "type": "fuentes_oficiales", "minimum": 2 },
      { "type": "indicadores_cuantitativos", "minimum": 3 },
      { "type": "series_temporales_años", "minimum": 2 }
    ],
    "failure_contract": {
      "abort_if": ["missing_required_element", "incomplete_text"],
      "emit_code": "ABORT-Q091-REQ"
    },
    "patterns": [
      { "id": "PAT-Q091-000", "category": "GENERAL", "match_type": "REGEX", "pattern": "línea base|diagnóstico migratorio|caracterización de la población migrante", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-001", "category": "GENERAL", "match_type": "REGEX", "pattern": "fuente:|según|reportado por|con datos de", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-002", "category": "FUENTE_OFICIAL", "match_type": "REGEX", "pattern": "Migración Colombia|R4V|GIFMM|Grupo Interagencial sobre Flujos Migratorios Mixtos", "policy_area": "PA10", "confidence_weight": 0.95, "specificity": "HIGH", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-003", "category": "FUENTE_OFICIAL", "match_type": "REGEX", "pattern": "DANE|Encuesta Pulso de la Migración|Censo", "policy_area": "PA10", "confidence_weight": 0.95, "specificity": "HIGH", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-004", "category": "TERRITORIAL", "match_type": "REGEX", "pattern": "ACNUR|OIM|Personería Municipal|Secretaría de Gobierno", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-005", "category": "INDICADOR", "match_type": "REGEX", "pattern": "número de migrantes|población con vocación de permanencia|población en tránsito|caminantes|flujo pendular", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-006", "category": "GENERAL", "match_type": "REGEX", "pattern": "Permiso por Protección Temporal|PPT|Estatuto Temporal de Protección|ETPV", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-007", "category": "INDICADOR", "match_type": "REGEX", "pattern": "NNA migrantes matriculados|NNA no acompañados|migrantes afiliados a salud|migrantes en SISBEN", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-008", "category": "TEMPORAL", "match_type": "REGEX", "pattern": "(?:19|20)\\d{2}|vigencia anterior|serie histórica de flujos", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" },
      { "id": "PAT-Q091-009", "category": "INDICADOR", "match_type": "REGEX", "pattern": "\\d+(\\.\\d+)?\\s*%|número de personas|hogares|porcentaje sobre la población total", "policy_area": "PA10", "confidence_weight": 0.85, "specificity": "MEDIUM", "context_scope": "PARAGRAPH", "flags": "i" }
    ],
    "validations": {
      "verificar_fuentes": { "minimum_required": 2, "patterns": ["fuente:", "según", "datos de", "DANE", "Migración Colombia", "OIM", "ACNUR"], "specificity": "MEDIUM" },
      "buscar_indicadores_cuantitativos": { "minimum_required": 3, "patterns": ["\\d+%", "\\d+\\s*por\\s*\\d+", "tasa de", "número de", "total de"], "specificity": "HIGH" },
      "series_temporales": { "minimum_years": 2, "patterns": ["20\\d{2}", "año", "periodo", "histórico", "serie"], "specificity": "MEDIUM" },
      "cobertura": { "minimum_required": 1, "patterns": ["departamental", "municipal", "urbano", "rural", "territorial"], "specificity": "HIGH" }
    }
  },
  "signal_requirements": {
    "mandatory_signals": ["baseline_completeness", "data_sources", "migration_indicators", "policy_coverage"],
    "optional_signals": ["geographic_scope", "temporal_coverage", "source_validation"],
    "minimum_signal_threshold": 0.5,
    "signal_aggregation": "weighted_mean",
    "note": "Signals aligned with PA10 (Migración transfronteriza) and DIM01 (INSUMOS)."
  },
  "traceability": {
    "source_question_id": "Q091",
    "specialized_from_base_slot": "D1-Q1",
    "source_file": "data/questionnaire_monolith.json",
    "json_path": "blocks.micro_questions[90]",
    "method_source": "src/farfan_core/core/orchestrator/executors.py:D1_Q1_Executor",
    "method_mapping_source": "executor_methods_mapping.json",
    "ontology_source": "config/canonical_ontologies/policy_areas_and_dimensions.json",
    "contract_author": "F.A.R.F.A.N Mechanistic Policy Pipeline",
    "contract_generation_method": "automated_specialization_from_monolith",
    "specialization_timestamp": "2025-12-18T12:00:00.000000+00:00",
    "provenance_note": "Contract generated with full 17-method orchestration for D1-Q1 quantitative baseline extraction, specialized for PA10 (Migración transfronteriza)."
  },
  "validation_rules": {
    "class_name": "ValidationEngine",
    "engine": "VALIDATION_ENGINE",
    "method_name": "validate",
    "module": "canonic_phases.Phase_two.evidence_nexus",
    "na_policy": "abort_on_critical",
    "rules": [
      { "type": "array", "field": "elements_found", "description": "Require territorial coverage", "must_contain": { "count": 1, "elements": ["cobertura_territorial_especificada"] } },
      { "type": "array", "field": "elements_found", "description": "Encourage minimum evidence", "should_contain": [{ "elements": ["fuentes_oficiales"], "minimum": 2 }, { "elements": ["indicadores_cuantitativos"], "minimum": 3 }, { "elements": ["series_temporales_años"], "minimum": 2 }] }
    ]
  },
  "test_configuration": {
    "expected_test_coverage": ">=90%",
    "integration_test_required": true,
    "test_document_fixtures": ["tests/fixtures/preprocessed_documents/sample_pdet_plan.json"],
    "test_files": ["tests/core/orchestrator/test_executors_contract.py", "tests/core/phases/test_phase2.py"]
  }
}
