{
  "$schema": "../../schemas/phase_manifest_schema.json",
  "manifest_version": "2.1.0",
  "phase": {
    "number": 4,
    "name": "Dimension Aggregation",
    "codename": "DIMENSION",
    "label": "Phase 4",
    "version": "1.1.0",
    "status": "ACTIVE",
    "criticality": "CRITICAL"
  },
  "metadata": {
    "created": "2025-01-09T00:00:00Z",
    "modified": "2026-01-17",
    "authors": [
      "F.A.R.F.A.N Core Team"
    ],
    "owners": [
      "phase4_team"
    ],
    "repository": "FARFAN_MCDPP",
    "surgery_note": "Phase 4 surgically separated from meta-phase 4-7 on 2026-01-13. Re-sequenced based on dependency analysis on 2026-01-17. Integration module (subphase 50) moved to orchestration layer on 2026-01-18."
  },
  "description": "Phase 4 aggregates 300 scored micro-questions from Phase 3 into 60 dimension scores (6 dimensions \u00d7 10 policy areas) using weighted averaging or Choquet integral. This phase is hermetically sealed and does NOT produce AreaScore, ClusterScore, or MacroScore - those belong to Phases 5, 6, and 7.",
  "stages": [
    {
      "code": 0,
      "name": "Infrastructure",
      "description": "Base infrastructure and types (no internal dependencies)",
      "execution_order": 1,
      "module_count": 1,
      "modules": [
        {
          "order": 0,
          "canonical_name": "__init__",
          "type": "INFRA",
          "criticality": "LOW",
          "purpose": "Package initialization"
        }
      ]
    },
    {
      "code": 0,
      "name": "Primitives",
      "description": "Foundational data structures and types (00 subphase)",
      "execution_order": 2,
      "module_count": 6,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_00_00_types",
          "type": "PRIM",
          "criticality": "CRITICAL",
          "purpose": "Base type definitions and DimensionScore dataclass (shared with Phase 5)",
          "dependencies": []
        },
        {
          "order": 2,
          "canonical_name": "phase4_00_00_quality_levels",
          "type": "PRIM",
          "criticality": "CRITICAL",
          "purpose": "Quality level enumerations",
          "dependencies": []
        },
        {
          "order": 3,
          "canonical_name": "phase4_00_00_uncertainty_metrics",
          "type": "PRIM",
          "criticality": "CRITICAL",
          "purpose": "Uncertainty quantification types",
          "dependencies": []
        },
        {
          "order": 4,
          "canonical_name": "phase4_00_00_choquet_primitives",
          "type": "PRIM",
          "criticality": "CRITICAL",
          "purpose": "Choquet integral mathematical primitives",
          "dependencies": []
        },
        {
          "order": 5,
          "canonical_name": "phase4_00_00_signal_enriched_primitives",
          "type": "PRIM",
          "criticality": "MEDIUM",
          "purpose": "Signal-based enrichment primitives",
          "dependencies": []
        },
        {
          "order": 6,
          "canonical_name": "phase4_00_00_aggregation_settings",
          "type": "PRIM",
          "criticality": "CRITICAL",
          "purpose": "Aggregation configuration dataclass",
          "dependencies": []
        }
      ]
    },
    {
      "code": 10,
      "name": "Foundation",
      "description": "Core foundational modules with minimal dependencies (10 subphase)",
      "execution_order": 3,
      "module_count": 3,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_10_00_aggregation_provenance",
          "type": "CORE",
          "criticality": "CRITICAL",
          "purpose": "W3C PROV-compliant DAG provenance tracking",
          "dependencies": [
            "external:networkx",
            "external:numpy"
          ]
        },
        {
          "order": 2,
          "canonical_name": "phase4_10_00_uncertainty_quantification",
          "type": "CORE",
          "criticality": "CRITICAL",
          "purpose": "BCa bootstrap and convergence diagnostics",
          "dependencies": [
            "external:statistics",
            "external:random"
          ]
        },
        {
          "order": 3,
          "canonical_name": "phase4_10_00_aggregation_settings",
          "type": "REDIR",
          "criticality": "CRITICAL",
          "purpose": "Settings re-export from primitives",
          "dependencies": [
            "phase4_00_00_aggregation_settings"
          ]
        }
      ]
    },
    {
      "code": 20,
      "name": "Core Processing",
      "description": "Core processing modules depending on foundation (20 subphase)",
      "execution_order": 4,
      "module_count": 1,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_20_00_choquet_adapter",
          "type": "CORE",
          "criticality": "CRITICAL",
          "purpose": "Choquet integral fuzzy measure adapter",
          "dependencies": [
            "phase4_10_00_uncertainty_quantification",
            "phase4_10_00_aggregation_settings"
          ]
        }
      ]
    },
    {
      "code": 30,
      "name": "Aggregators",
      "description": "Main aggregation engines (30 subphase)",
      "execution_order": 5,
      "module_count": 3,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_30_00_choquet_aggregator",
          "type": "CORE",
          "criticality": "CRITICAL",
          "purpose": "Multi-layer Choquet aggregation",
          "dependencies": []
        },
        {
          "order": 2,
          "canonical_name": "phase4_30_00_aggregation",
          "type": "CORE",
          "criticality": "CRITICAL",
          "purpose": "Main dimension aggregator (300\u219260)",
          "dependencies": [
            "phase4_10_00_aggregation_provenance",
            "phase4_10_00_uncertainty_quantification",
            "phase4_10_00_aggregation_settings",
            "phase4_20_00_choquet_adapter"
          ]
        },
        {
          "order": 3,
          "canonical_name": "phase4_30_00_signal_enriched_aggregation",
          "type": "ENH",
          "criticality": "MEDIUM",
          "purpose": "Signal-based aggregation enhancements",
          "dependencies": [
            "phase4_00_00_signal_enriched_primitives"
          ]
        }
      ]
    },
    {
      "code": 40,
      "name": "Enhancements",
      "description": "Enhancement and optimization modules (40 subphase)",
      "execution_order": 6,
      "module_count": 2,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_40_00_adaptive_meso_scoring",
          "type": "ENH",
          "criticality": "MEDIUM",
          "purpose": "Adaptive penalty scoring for meso-level",
          "dependencies": []
        },
        {
          "order": 2,
          "canonical_name": "phase4_40_00_aggregation_enhancements",
          "type": "ENH",
          "criticality": "MEDIUM",
          "purpose": "Performance and telemetry enhancements",
          "dependencies": [
            "infrastructure:contractual"
          ]
        }
      ]
    },
    {
      "code": 60,
      "name": "Validation",
      "description": "Output validation (60 subphase)",
      "execution_order": 8,
      "module_count": 1,
      "modules": [
        {
          "order": 1,
          "canonical_name": "phase4_60_00_aggregation_validation",
          "type": "VAL",
          "criticality": "CRITICAL",
          "purpose": "Phase 4 output validation",
          "dependencies": [
            "phase4_30_00_aggregation"
          ]
        }
      ]
    }
  ],
  "contracts": {
    "input": "300 ScoredMicroQuestion",
    "output": "60 DimensionScore",
    "invariants": [
      "len(output) == 60",
      "all scores in [0.0, 3.0]",
      "provenance DAG created"
    ]
  },
  "quality_metrics": {
    "coverage": 0.9,
    "complexity": "HIGH"
  },
  "performance_characteristics": {
    "time_complexity": "O(n)",
    "space_complexity": "O(n)"
  },
  "validation": {
    "compliant": true,
    "last_check": "2026-01-17T00:00:00Z"
  },
  "statistics": {
    "total_modules": 17,
    "stages": 7
  },
  "dependency_graph": {
    "note": "Subphase numbers indicate sequential execution order. First number = subphase, second = position within subphase."
  }
}