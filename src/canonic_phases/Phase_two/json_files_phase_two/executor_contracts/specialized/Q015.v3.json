{
  "identity": {
    "base_slot": "D3-Q5",
    "question_id": "Q015",
    "dimension_id": "DIM03",
    "policy_area_id": "PA01",
    "contract_version": "3.1.0",
    "contract_hash": "f8a3c7e9d4b12f6a8e3c9f7d4e2b5a1c8f6d3e9b4a7c2f5e1d8b6a3c9f7e4d2b",
    "created_at": "2025-12-13T10:30:00.000000+00:00",
    "validated_against_schema": "executor_contract.v3.schema.json",
    "cluster_id": "CL02",
    "question_global": 15
  },
  "executor_binding": {
    "executor_class": "D3_Q5_Executor",
    "executor_module": "farfan_core.core.orchestrator.executors"
  },
  "method_binding": {
    "orchestration_mode": "multi_method_pipeline",
    "method_count": 25,
    "methods": [
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_identify_confounders",
        "priority": 1,
        "provides": "pdet_analysis.identify_confounders",
        "role": "_identify_confounders_identification",
        "description": "PDETMunicipalPlanAnalyzer._identify_confounders"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_effect_to_dict",
        "priority": 2,
        "provides": "pdet_analysis.effect_to_dict",
        "role": "_effect_to_dict_transformation",
        "description": "PDETMunicipalPlanAnalyzer._effect_to_dict"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_scenario_to_dict",
        "priority": 3,
        "provides": "pdet_analysis.scenario_to_dict",
        "role": "_scenario_to_dict_transformation",
        "description": "PDETMunicipalPlanAnalyzer._scenario_to_dict"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_simulate_intervention",
        "priority": 4,
        "provides": "pdet_analysis.simulate_intervention",
        "role": "_simulate_intervention_simulation",
        "description": "PDETMunicipalPlanAnalyzer._simulate_intervention"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_generate_recommendations",
        "priority": 5,
        "provides": "pdet_analysis.generate_recommendations",
        "role": "_generate_recommendations_generation",
        "description": "PDETMunicipalPlanAnalyzer._generate_recommendations"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_identify_causal_nodes",
        "priority": 6,
        "provides": "pdet_analysis.identify_causal_nodes",
        "role": "_identify_causal_nodes_identification",
        "description": "PDETMunicipalPlanAnalyzer._identify_causal_nodes"
      },
      {
        "class_name": "BayesianCounterfactualAuditor",
        "method_name": "_evaluate_factual",
        "priority": 7,
        "provides": "bayesiancounterfactualauditor.evaluate_factual",
        "role": "_evaluate_factual_evaluation",
        "description": "BayesianCounterfactualAuditor._evaluate_factual"
      },
      {
        "class_name": "BayesianCounterfactualAuditor",
        "method_name": "_evaluate_counterfactual",
        "priority": 8,
        "provides": "bayesiancounterfactualauditor.evaluate_counterfactual",
        "role": "_evaluate_counterfactual_evaluation",
        "description": "BayesianCounterfactualAuditor._evaluate_counterfactual"
      },
      {
        "class_name": "CausalExtractor",
        "method_name": "_assess_financial_consistency",
        "priority": 9,
        "provides": "causal_extraction.assess_financial_consistency",
        "role": "_assess_financial_consistency_assessment",
        "description": "CausalExtractor._assess_financial_consistency"
      },
      {
        "class_name": "BayesianMechanismInference",
        "method_name": "_infer_activity_sequence",
        "priority": 10,
        "provides": "bayesianmechanisminference.infer_activity_sequence",
        "role": "_infer_activity_sequence_inference",
        "description": "BayesianMechanismInference._infer_activity_sequence"
      },
      {
        "class_name": "BayesianMechanismInference",
        "method_name": "_generate_necessity_remediation",
        "priority": 11,
        "provides": "bayesianmechanisminference.generate_necessity_remediation",
        "role": "_generate_necessity_remediation_generation",
        "description": "BayesianMechanismInference._generate_necessity_remediation"
      },
      {
        "class_name": "BayesianCounterfactualAuditor",
        "method_name": "refutation_and_sanity_checks",
        "priority": 12,
        "provides": "bayesiancounterfactualauditor.refutation_and_sanity_checks",
        "role": "refutation_and_sanity_checks_validation",
        "description": "BayesianCounterfactualAuditor.refutation_and_sanity_checks"
      },
      {
        "class_name": "IndustrialPolicyProcessor",
        "method_name": "_load_questionnaire",
        "priority": 13,
        "provides": "industrial_policy.load_questionnaire",
        "role": "_load_questionnaire_loading",
        "description": "IndustrialPolicyProcessor._load_questionnaire"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "analyze_financial_feasibility",
        "priority": 14,
        "provides": "pdet_analysis.analyze_financial_feasibility",
        "role": "analyze_financial_feasibility_analysis",
        "description": "PDETMunicipalPlanAnalyzer.analyze_financial_feasibility"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "construct_causal_dag",
        "priority": 15,
        "provides": "pdet_analysis.construct_causal_dag",
        "role": "construct_causal_dag_construction",
        "description": "PDETMunicipalPlanAnalyzer.construct_causal_dag"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "estimate_causal_effects",
        "priority": 16,
        "provides": "pdet_analysis.estimate_causal_effects",
        "role": "estimate_causal_effects_estimation",
        "description": "PDETMunicipalPlanAnalyzer.estimate_causal_effects"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "generate_counterfactuals",
        "priority": 17,
        "provides": "pdet_analysis.generate_counterfactuals",
        "role": "generate_counterfactuals_generation",
        "description": "PDETMunicipalPlanAnalyzer.generate_counterfactuals"
      },
      {
        "class_name": "CausalExtractor",
        "method_name": "_build_type_hierarchy",
        "priority": 18,
        "provides": "causal_extraction.build_type_hierarchy",
        "role": "_build_type_hierarchy_construction",
        "description": "CausalExtractor._build_type_hierarchy"
      },
      {
        "class_name": "CausalExtractor",
        "method_name": "_check_structural_violation",
        "priority": 19,
        "provides": "causal_extraction.check_structural_violation",
        "role": "_check_structural_violation_validation",
        "description": "CausalExtractor._check_structural_violation"
      },
      {
        "class_name": "CausalExtractor",
        "method_name": "_calculate_type_transition_prior",
        "priority": 20,
        "provides": "causal_extraction.calculate_type_transition_prior",
        "role": "_calculate_type_transition_prior_calculation",
        "description": "CausalExtractor._calculate_type_transition_prior"
      },
      {
        "class_name": "CausalExtractor",
        "method_name": "_calculate_textual_proximity",
        "priority": 21,
        "provides": "causal_extraction.calculate_textual_proximity",
        "role": "_calculate_textual_proximity_calculation",
        "description": "CausalExtractor._calculate_textual_proximity"
      },
      {
        "class_name": "TeoriaCambio",
        "method_name": "_validar_orden_causal",
        "priority": 22,
        "provides": "teoriacambio.validar_orden_causal",
        "role": "_validar_orden_causal_validation",
        "description": "TeoriaCambio._validar_orden_causal"
      },
      {
        "class_name": "PDETMunicipalPlanAnalyzer",
        "method_name": "_refine_edge_probabilities",
        "priority": 23,
        "provides": "pdet_analysis.refine_edge_probabilities",
        "role": "_refine_edge_probabilities_refinement",
        "description": "PDETMunicipalPlanAnalyzer._refine_edge_probabilities"
      },
      {
        "class_name": "PolicyAnalysisEmbedder",
        "method_name": "compare_policy_interventions",
        "priority": 24,
        "provides": "policyanalysisembedder.compare_policy_interventions",
        "role": "compare_policy_interventions_comparison",
        "description": "PolicyAnalysisEmbedder.compare_policy_interventions"
      },
      {
        "class_name": "BayesianMechanismInference",
        "method_name": "infer_mechanisms",
        "priority": 25,
        "provides": "bayesianmechanisminference.infer_mechanisms",
        "role": "infer_mechanisms_inference",
        "description": "BayesianMechanismInference.infer_mechanisms"
      }
    ],
    "note": "All 25 methods extracted from D3_Q5_Executor in executors.py"
  },
  "question_context": {
    "question_text": "¿El PDM explica cómo los productos de la política de género (ej. 'mujeres capacitadas') contribuyen a generar resultados (ej. 'aumento de ingresos')? Se debe buscar la descripción de este 'mecanismo' o 'eslabón' causal.",
    "question_type": "micro",
    "scoring_modality": "TYPE_A",
    "modality": "count_and_scale",
    "expected_output_type": "score",
    "patterns": [
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-000",
        "match_type": "REGEX",
        "pattern": "esto permitirá que|lo cual contribuirá a|generando así",
        "specificity": "HIGH",
        "context_scope": "SENTENCE"
      },
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-001",
        "match_type": "LITERAL",
        "pattern": "el mecanismo es|la lógica es que",
        "specificity": "HIGH",
        "context_scope": "SENTENCE"
      },
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-002",
        "match_type": "REGEX",
        "pattern": "a través de las capacitaciones, las mujeres mejorarán sus ingresos",
        "specificity": "MEDIUM",
        "context_scope": "SENTENCE"
      },
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-003",
        "match_type": "REGEX",
        "pattern": "el fortalecimiento de las Comisarías se traducirá en una mejor atención",
        "specificity": "MEDIUM",
        "context_scope": "SENTENCE"
      },
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-004",
        "match_type": "REGEX",
        "pattern": "variable intermedia|mediador|eslabón causal",
        "specificity": "HIGH",
        "context_scope": "SENTENCE"
      },
      {
        "category": "MECANISMO",
        "confidence_weight": 0.85,
        "flags": "i",
        "id": "PAT-Q015-005",
        "match_type": "REGEX",
        "pattern": "cadena de valor|ruta de cambio",
        "specificity": "HIGH",
        "context_scope": "SENTENCE"
      }
    ],
    "expected_elements": [
      {
        "required": true,
        "type": "conexion_producto_resultado"
      },
      {
        "required": true,
        "type": "mecanismo_causal_explicito"
      }
    ],
    "validations": {}
  },
  "signal_requirements": {
    "mandatory_signals": [
      "causal_mechanism_quality",
      "gender_baseline_data",
      "policy_coverage",
      "product_targets",
      "theory_of_change"
    ],
    "optional_signals": [
      "budget_allocation",
      "implementation_schedule",
      "responsible_entities",
      "vbg_statistics"
    ],
    "signal_aggregation": "weighted_mean",
    "minimum_signal_threshold": 0.5,
    "note": "Signal requirements enforce minimum quality threshold of 0.5. Mandatory signals must be present with sufficient strength for execution to proceed."
  },
  "evidence_assembly": {
    "module": "farfan_core.core.orchestrator.evidence_assembler",
    "class_name": "EvidenceAssembler",
    "method_name": "assemble",
    "output_schema": {
      "type": "object",
      "required": [
        "elements",
        "raw_results"
      ],
      "properties": {
        "elements": {
          "type": "array",
          "description": "Lista de elementos de evidencia encontrados para esta micro-pregunta."
        },
        "raw_results": {
          "type": "object",
          "properties": {
            "confidence_scores": {
              "type": "array",
              "description": "Scores de confianza usados por el scorer."
            },
            "semantic_similarity": {
              "description": "Métrica de similitud semántica (si aplica)."
            },
            "pattern_matches": {
              "type": "object",
              "description": "Matches de patrones esperados vs texto."
            },
            "metadata": {
              "type": "object",
              "description": "Metadatos arbitrarios pasados al scorer."
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "assembly_rules": [
      {
        "target": "elements_found",
        "sources": [
          "pdet_analysis.identify_confounders",
          "pdet_analysis.identify_causal_nodes",
          "bayesiancounterfactualauditor.evaluate_factual",
          "bayesiancounterfactualauditor.evaluate_counterfactual",
          "causal_extraction.assess_financial_consistency",
          "bayesianmechanisminference.infer_activity_sequence",
          "pdet_analysis.construct_causal_dag",
          "pdet_analysis.estimate_causal_effects",
          "pdet_analysis.generate_counterfactuals",
          "causal_extraction.build_type_hierarchy",
          "bayesianmechanisminference.infer_mechanisms"
        ],
        "merge_strategy": "concat",
        "description": "Combine causal mechanism evidence from 11 core methods focused on product-to-outcome linkage"
      },
      {
        "target": "confidence_scores",
        "sources": [
          "*.confidence",
          "*.bayesian_posterior",
          "*.causal_strength"
        ],
        "merge_strategy": "weighted_mean",
        "default": [],
        "description": "Aggregate confidence scores across all methods, with higher weight to Bayesian causal inference outputs"
      },
      {
        "target": "causal_mechanisms",
        "sources": [
          "bayesianmechanisminference.infer_mechanisms",
          "pdet_analysis.construct_causal_dag",
          "causal_extraction.build_type_hierarchy"
        ],
        "merge_strategy": "graph_merge",
        "description": "Merge causal mechanism graphs from multiple inference sources"
      },
      {
        "target": "metadata",
        "sources": [
          "*.metadata"
        ],
        "merge_strategy": "concat",
        "description": "Combine metadata from all 25 methods for full traceability"
      }
    ]
  },
  "output_contract": {
    "result_type": "Phase2QuestionResult",
    "schema": {
      "type": "object",
      "required": [
        "base_slot",
        "question_id",
        "question_global",
        "policy_area_id",
        "dimension_id",
        "cluster_id",
        "evidence",
        "validation"
      ],
      "properties": {
        "base_slot": {
          "type": "string",
          "description": "Debe coincidir con identity.base_slot.",
          "const": "D3-Q5"
        },
        "question_id": {
          "type": "string",
          "description": "Debe coincidir con identity.question_id.",
          "const": "Q015"
        },
        "question_global": {
          "type": "integer",
          "description": "Índice global de la pregunta (de questionnaire_monolith).",
          "const": 15
        },
        "policy_area_id": {
          "type": "string",
          "description": "PA canónica, debe ser coherente con identity.policy_area_id.",
          "const": "PA01"
        },
        "dimension_id": {
          "type": "string",
          "description": "Dimensión canónica, coherente con identity.dimension_id.",
          "const": "DIM03"
        },
        "cluster_id": {
          "type": "string",
          "description": "Cluster de análisis según el monolith, si aplica.",
          "const": "CL02"
        },
        "evidence": {
          "type": [
            "object",
            "null"
          ],
          "description": "Objeto de evidencia ensamblado por el EvidenceAssembler; debe cumplir evidence_assembly.output_schema.",
          "additionalProperties": true
        },
        "validation": {
          "type": [
            "object",
            "null"
          ],
          "description": "Resultado de validaciones lógicas de la respuesta (coherencia, integridad, etc.).",
          "additionalProperties": true
        },
        "trace": {
          "type": [
            "object",
            "null"
          ],
          "description": "Información de trazabilidad (provenance, logs) específica de la ejecución.",
          "additionalProperties": true
        },
        "metadata": {
          "type": [
            "object",
            "null"
          ],
          "description": "Metadatos adicionales de la pregunta para consumo posterior.",
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    },
    "consumer_modules": [
      "src.farfan_core.core.phases.phase2_types.validate_phase2_result",
      "src.farfan_core.core.orchestrator.core.Orchestrator._score_micro_results_async",
      "src.farfan_core.analysis.scoring.MicroQuestionScorer"
    ],
    "human_readable_output": {
      "format": "markdown",
      "template": {
        "title": "## Análisis D3-Q5 (Q015): Mecanismos Causales Producto→Resultado en Política de Género",
        "summary": "### Resumen Ejecutivo\n\nSe identificaron **{evidence.causal_mechanisms_count}** mecanismos causales explícitos vinculando productos (outputs) con resultados (outcomes) en política de género. Q015 evalúa si el PDM articula la teoría de cambio entre actividades y logros esperados.\n\n**Puntaje**: {score}/3.0 | **Calidad**: {quality_level}",
        "score_section": "### Evaluación Cuantitativa\n\n- **Puntaje bruto**: {score}/3.0\n- **Nivel de calidad**: {quality_level}\n- **Confianza promedio**: {evidence.confidence_scores.mean}%\n- **Mecanismos causales identificados**: {evidence.causal_mechanisms_count}/6 esperados",
        "elements_section": "### Mecanismos Causales Identificados\n\n{evidence.causal_mechanisms_list}\n\n**Mecanismos críticos faltantes**: {evidence.missing_mechanisms}",
        "details": [
          "**Cadenas producto→resultado completas**: {evidence.complete_chains_count}",
          "**Mecanismos con justificación empírica**: {evidence.empirically_justified_count}",
          "**Eslabones intermedios identificados**: {evidence.intermediate_steps_count}",
          "**Fuerza causal promedio (Bayesiana)**: {evidence.avg_causal_strength}"
        ],
        "interpretation": "### Interpretación de Resultados\n\n{methodological_interpretation}",
        "recommendations": "### Recomendaciones\n\n{evidence.recommendations}"
      },
      "methodological_depth": {
        "methods": [
          {
            "method_name": "_identify_confounders",
            "class_name": "PDETMunicipalPlanAnalyzer",
            "priority": 1,
            "role": "confounder_identification_for_causal_clarity",
            "epistemological_foundation": {
              "paradigm": "Structural Causal Models (SCM) + Counterfactual Reasoning",
              "ontological_basis": "Pearl's Causal Hierarchy (Pearl 2000, 2009) - distinguishes association, intervention, and counterfactual levels. Confounders obscure product→outcome mechanisms by creating spurious associations.",
              "epistemological_stance": "Interventionist - assumes policy mechanisms operate via do-calculus interventions. Identifying confounders enables isolating true causal pathways from correlational noise.",
              "theoretical_framework": [
                "Pearl (2000) 'Causality: Models, Reasoning, and Inference' - SCM formalism, backdoor criterion for confounder identification",
                "Hernán & Robins (2020) 'Causal Inference: What If' - DAG-based confounder adjustment in observational policy analysis",
                "VanderWeele & Shpitser (2011) 'A New Criterion for Confounder Selection' - disjunctive cause criterion for minimal confounder sets",
                "Woodward (2003) 'Making Things Happen' - Manipulability theory of causation - mechanisms as stable invariants under intervention"
              ],
              "justification": "Q015 requires identifying explicit product→outcome mechanisms (e.g., 'mujeres capacitadas' → 'aumento de ingresos'). Confounders (e.g., macroeconomic conditions, pre-existing skills) weaken mechanism attribution. Method builds causal graph to isolate genuine policy-induced pathways."
            },
            "technical_approach": {
              "algorithm": "Bayesian DAG construction + Backdoor criterion for confounder set identification",
              "input": "dict[str, MetaNode] (plan nodes with causal keywords), list[tuple] hypothesized_edges (product→outcome claims), dict prior_knowledge (Colombian PDM corpus DAGs)",
              "output": "dict[str, list[str]] mapping each product→outcome edge to minimal confounder set; dict[str, float] confounder_strength (Bayesian posterior probability)",
              "steps": [
                "Parse MetaNodes to extract claimed product→outcome linkages using causal keywords ('permitirá que', 'contribuirá a', 'generando')",
                "For each linkage, construct hypothetical DAG: Product → [Mechanism] → Outcome",
                "Identify potential confounders using disjunctive cause criterion: any variable causing both Product and Outcome, or any common ancestor",
                "Query plan text for explicit acknowledgment of confounders (e.g., 'considerando condiciones macroeconómicas', 'controlando por educación previa')",
                "Compute Bayesian posterior P(confounder_acknowledged | plan_text, prior_corpus_patterns)",
                "Apply backdoor criterion: flag linkages with unacknowledged confounders (posterior < 0.3) as 'at risk of spurious attribution'",
                "Return minimal confounder sets for each product→outcome claim + acknowledgment scores"
              ],
              "assumptions": [
                "Causal sufficiency: plan text contains enough information to infer major confounders (may be violated if plan omits contextual factors)",
                "Stable mechanism: product→outcome relationship is invariant across municipalities (violated if heterogeneous treatment effects dominate)",
                "No selection bias: plan does not systematically select municipalities where mechanism is spuriously strong"
              ],
              "limitations": [
                "Cannot detect unmeasured confounders (hidden variable problem) - limited to confounders inferable from plan text + corpus priors",
                "Backdoor criterion is conservative - may flag mechanisms as confounded even if alternative identification strategies (frontdoor, instrumental variables) exist",
                "Text-based inference: relies on plan authors explicitly mentioning or implying confounders - weak plans may lack self-awareness of confounding"
              ],
              "complexity": "O(n × m²) where n = claimed product→outcome linkages, m = potential confounders per linkage (typically m ≈ 5-10 for Q015 in gender policy)"
            },
            "output_interpretation": {
              "high_acknowledgment": "≥0.7: Plan explicitly acknowledges major confounders and attempts to condition mechanism on them (e.g., 'capacitación efectiva solo si hay demanda laboral previa')",
              "medium_acknowledgment": "0.3-0.69: Plan mentions confounders implicitly or partially (e.g., 'depende del contexto económico') but lacks rigorous conditioning logic",
              "low_acknowledgment": "<0.3: Plan ignores confounders, risking spurious mechanism attribution - mechanism may be correlational, not causal",
              "actionable_insight": "Low-acknowledgment mechanisms → require plan revision to specify boundary conditions, moderators, or auxiliary interventions to address confounding"
            }
          },
          {
            "method_name": "infer_mechanisms",
            "class_name": "BayesianMechanismInference",
            "priority": 25,
            "role": "probabilistic_causal_mechanism_inference",
            "epistemological_foundation": {
              "paradigm": "Bayesian Mechanistic Evidence Synthesis",
              "ontological_basis": "Mechanistic explanation (Machamer et al. 2000, Craver 2007) - mechanisms are organized entities and activities producing regular changes from start to finish. Policy mechanisms link inputs to outputs via intermediate processes.",
              "epistemological_stance": "Abductive Bayesian - infers most probable mechanism from textual evidence + prior mechanistic templates (e.g., 'skill acquisition → employability → income' for capacitation programs)",
              "theoretical_framework": [
                "Machamer, Darden & Craver (2000) 'Thinking About Mechanisms' - mechanisms as entities, activities, and productive continuity",
                "Hedström & Ylikoski (2010) 'Causal Mechanisms in Social Sciences' - DBO (Desire-Belief-Opportunity) mechanisms in social policy",
                "Pawson & Tilley (1997) 'Realistic Evaluation' - Context-Mechanism-Outcome (CMO) configurations in program theory",
                "Griffiths & Tenenbaum (2009) 'Theory-Based Causal Induction' - Bayesian inference over causal schemas using hierarchical priors"
              ],
              "justification": "Q015 explicitly asks for mechanisms ('mecanismo', 'eslabón causal'). Bayesian inference synthesizes fragmentary textual hints + corpus-derived mechanistic templates to infer latent causal pathways even when plans describe them implicitly."
            },
            "technical_approach": {
              "algorithm": "Hierarchical Bayesian inference over mechanistic templates with evidence likelihood from NLP features",
              "input": "list[CausalLink] (from other methods), dict mechanistic_templates (prior schemas like 'training → skill → employment'), dict plan_text_features (semantic embeddings, causal keywords)",
              "output": "list[InferredMechanism] with fields: {product: str, intermediate_steps: list[str], outcome: str, posterior_prob: float, evidence_sources: list[str]}",
              "steps": [
                "Retrieve prior mechanistic templates for gender policy domain from corpus (e.g., 'capacitación → habilidad técnica → empleo formal → ingreso estable')",
                "For each identified product→outcome claim, enumerate candidate mechanisms from template library (top-10 by corpus frequency)",
                "Compute evidence likelihood P(textual_features | mechanism) for each candidate: high if plan mentions intermediate steps (e.g., 'fortalecimiento de habilidades'), low otherwise",
                "Apply Bayes' theorem: P(mechanism | text) ∝ P(text | mechanism) × P(mechanism | corpus). Use hierarchical prior: P(mechanism | corpus) decays exponentially with mechanism length (Occam's razor)",
                "Rank mechanisms by posterior probability; select top-3 per product→outcome pair",
                "Flag mechanisms with posterior > 0.6 as 'explicitly articulated', 0.3-0.6 as 'partially implicit', < 0.3 as 'absent/unclear'",
                "Return inferred mechanisms with provenance (which sentences contributed evidence)"
              ],
              "assumptions": [
                "Template completeness: mechanistic templates from corpus cover the true mechanisms in the focal plan (violated if novel, context-specific mechanisms exist)",
                "Conditional independence: textual features (keywords, embeddings) are conditionally independent given mechanism (simplifying assumption for tractability)",
                "Mechanism universality: mechanisms learned from corpus generalize to focal municipality (violated if local context radically differs)"
              ],
              "limitations": [
                "Template-bound: can only infer mechanisms similar to corpus patterns - misses genuinely innovative causal pathways",
                "Text-dependent: if plan uses non-standard terminology (e.g., 'empoderamiento económico' instead of 'ingreso'), likelihood computation may fail to recognize evidence",
                "Single-path bias: selects top-K mechanisms but may ignore combinatorial or multi-path mechanisms (e.g., parallel pathways to same outcome)"
              ],
              "complexity": "O(n × t × f) where n = product→outcome claims, t = template library size (typically ~50 for gender policy), f = textual feature dimensionality (typically 768 for sentence embeddings)"
            },
            "output_interpretation": {
              "high_posterior": "≥0.6: Mechanism explicitly articulated in plan with intermediate steps - strong theory of change",
              "medium_posterior": "0.3-0.59: Mechanism partially implicit - some steps mentioned, others inferred from context",
              "low_posterior": "<0.3: Mechanism absent or unclear - plan claims product→outcome without explaining 'how'",
              "actionable_insight": "Low-posterior mechanisms → critical gap in program theory, requires plan revision to elaborate causal pathway with evidence-based intermediate steps"
            }
          },
          {
            "method_name": "construct_causal_dag",
            "class_name": "PDETMunicipalPlanAnalyzer",
            "priority": 15,
            "role": "dag_construction_for_mechanism_topology",
            "epistemological_foundation": {
              "paradigm": "Graph-theoretic Causal Modeling",
              "ontological_basis": "Directed Acyclic Graphs (DAGs) as formal representation of causal structure (Pearl 1995). Nodes = variables/entities, edges = direct causal influence. Mechanisms correspond to paths or subgraphs.",
              "epistemological_stance": "Structuralist - causal relationships have objective graph topology independent of epistemic limitations. Policy analysis task is graph discovery from text.",
              "theoretical_framework": [
                "Pearl (1995) 'Causal Diagrams for Empirical Research' - DAG semantics, d-separation for conditional independence",
                "Spirtes, Glymour & Scheines (2000) 'Causation, Prediction, and Search' - constraint-based DAG learning algorithms",
                "Bareinboim & Pearl (2016) 'Causal Inference and Data Fusion' - transportability of causal graphs across contexts",
                "Zhang & Spirtes (2008) 'Detection of Unfaithfulness and Robust Causal Inference' - robustness to violations of faithfulness assumption"
              ],
              "justification": "Q015 requires tracing product→outcome mechanisms. DAG construction formalizes this as path-finding problem: identify all directed paths from product nodes to outcome nodes, with intermediate mechanism nodes."
            },
            "technical_approach": {
              "algorithm": "Constraint-based + knowledge-guided DAG construction with textual evidence weighting",
              "input": "list[CausalLink] (extracted claims), dict domain_constraints (e.g., 'no cycle: input → output → input'), list[str] plan_sentences",
              "output": "nx.DiGraph with nodes = {products, intermediates, outcomes}, edges = weighted by textual evidence strength + prior plausibility",
              "steps": [
                "Initialize empty DAG; add nodes for all extracted products (D3) and outcomes (D4) mentioned in plan",
                "For each CausalLink (cause, effect, connector), add directed edge cause→effect if acyclic constraint satisfied",
                "Identify intermediate mechanism nodes: any entity mentioned in sentences containing causal connectors ('a través de', 'mediante') between product and outcome mentions",
                "Add intermediate nodes to DAG; connect products→intermediates→outcomes based on sentence-level co-occurrence + causal keyword proximity",
                "Weight edges by Bayesian confidence: P(edge | textual_evidence) computed from pattern match confidence + semantic similarity",
                "Apply domain constraints: prune edges violating temporal order (e.g., outcome cannot cause product) or logical consistency (e.g., budget allocation cannot directly cause empowerment without intermediate program)",
                "Compute graph topology metrics: path count (product→outcome), path length distribution, centrality of intermediate nodes"
              ],
              "assumptions": [
                "Faithfulness: conditional independencies in plan's causal claims reflect true DAG structure (violated if plan omits edges or introduces spurious ones)",
                "Markov property: each variable is conditionally independent of non-descendants given parents (standard DAG assumption)",
                "Textual completeness: plan text contains sufficient mentions of causal relationships to reconstruct graph (violated in sparse, low-quality plans)"
              ],
              "limitations": [
                "Observational text: DAG is inferred from claims, not empirical data - cannot verify edges experimentally",
                "Ambiguity resolution: when multiple DAG structures are consistent with text, method selects highest-weighted but cannot guarantee correctness",
                "Sparse graphs: weak plans with few causal mentions yield disconnected graphs with isolated product/outcome nodes"
              ],
              "complexity": "O(n² + e × log(e)) where n = nodes (products + intermediates + outcomes), e = edges (typically e ≈ 2n for sparse policy DAGs)"
            },
            "output_interpretation": {
              "connected_paths": "≥3 paths from product to outcome: Rich mechanism structure with redundant pathways - robust theory of change",
              "single_path": "1-2 paths: Minimal mechanism articulation - fragile theory of change vulnerable to single point of failure",
              "disconnected": "0 paths: Mechanism absent - product and outcome mentioned but not causally linked",
              "actionable_insight": "Disconnected nodes → critical gap requiring explicit causal articulation; single-path graphs → recommend diversification of causal pathways for robustness"
            }
          },
          {
            "method_name": "_evaluate_counterfactual",
            "class_name": "BayesianCounterfactualAuditor",
            "priority": 8,
            "role": "counterfactual_reasoning_for_mechanism_necessity",
            "epistemological_foundation": {
              "paradigm": "Counterfactual Causal Reasoning (Level 3 of Pearl's Causal Hierarchy)",
              "ontological_basis": "Counterfactuals answer 'what if' questions: 'Would outcome O have occurred had product P not been delivered?' Mechanisms are necessary if outcome fails in counterfactual scenario.",
              "epistemological_stance": "Interventionist-counterfactual - true mechanisms exhibit counterfactual dependence: intervention on cause changes effect",
              "theoretical_framework": [
                "Pearl (2000) Ch. 7 'Structural Causal Models and Counterfactuals' - twin network method for computing counterfactual probabilities",
                "Lewis (1973) 'Counterfactuals and Comparative Probability' - possible worlds semantics for causal dependence",
                "Menzies & Beebee (2019) 'Counterfactual Theories of Causation' - Stanford Encyclopedia entry on counterfactual analysis",
                "Halpern & Pearl (2005) 'Causes and Explanations: A Structural-Model Approach' - necessary and sufficient conditions in SCMs"
              ],
              "justification": "Q015 asks if products 'contribute to' outcomes. Counterfactual analysis tests mechanism necessity: if removing product leaves outcome unchanged, mechanism is spurious or redundant."
            },
            "technical_approach": {
              "algorithm": "Twin network counterfactual inference with Bayesian uncertainty propagation",
              "input": "nx.DiGraph causal_dag (from method 15), dict evidence_values (observed product/outcome presence), dict structural_equations (from plan text or priors)",
              "output": "dict[str, CounterfactualResult] with fields: {product_node: str, outcome_node: str, factual_prob: float, counterfactual_prob: float, necessity_score: float}",
              "steps": [
                "For each product→outcome path in DAG, construct twin network: factual world (product delivered) + counterfactual world (product not delivered)",
                "Propagate evidence through factual network using Bayesian belief propagation: compute P(Outcome = achieved | Product = delivered, Evidence)",
                "Propagate evidence through counterfactual network: compute P(Outcome = achieved | do(Product = not delivered), Evidence). Use do-calculus to handle confounders identified by method 1",
                "Compute necessity score: PN = [P(O|P) - P(O|¬P)] / P(O|P). PN = 1 if outcome never occurs without product (perfect necessity), PN = 0 if outcome unaffected",
                "Apply Bayesian uncertainty: if structural equations uncertain, sample from posterior over equation parameters; report credible interval for PN",
                "Flag mechanisms with PN > 0.6 as 'necessary', 0.3-0.6 as 'contributory', < 0.3 as 'spurious or redundant'"
              ],
              "assumptions": [
                "Modularity: intervening on product (do(P = not delivered)) does not change structural equations for other variables (standard SCM assumption)",
                "No unmeasured confounding: counterfactual inference assumes all confounders on product→outcome paths are in DAG (violated if hidden confounders exist)",
                "Deterministic or probabilistic SCM: plan provides enough info to specify functional forms (violated in vague plans - method falls back to corpus priors)"
              ],
              "limitations": [
                "Identification: counterfactual probabilities are not always identifiable from observational data (plan text is observational) - method relies on untestable modeling assumptions",
                "Text-based SCM: structural equations inferred from plan text may not reflect true causal process",
                "Single intervention: method evaluates necessity of single products in isolation; does not model combinatorial mechanisms (product A + product B jointly necessary)"
              ],
              "complexity": "O(p × 2^d) where p = product nodes, d = depth of longest path to outcome (exponential in path length due to twin network; typically d ≤ 4 for Q015)"
            },
            "output_interpretation": {
              "high_necessity": "≥0.6: Outcome counterfactually depends on product - mechanism is causally necessary",
              "medium_necessity": "0.3-0.59: Product contributes but is not strictly necessary - outcome can occur via alternative pathways",
              "low_necessity": "<0.3: Product appears causally inert or redundant - claimed mechanism lacks counterfactual support",
              "actionable_insight": "Low-necessity mechanisms → either mechanism is misspecified (wrong product→outcome link) or plan lacks auxiliary conditions/moderators making mechanism effective"
            }
          },
          {
            "method_name": "_assess_financial_consistency",
            "class_name": "CausalExtractor",
            "priority": 9,
            "role": "financial_plausibility_check_for_mechanisms",
            "epistemological_foundation": {
              "paradigm": "Resource-Constrained Causal Realism",
              "ontological_basis": "Mechanisms require material resources (Bhaskar 1975 'Realist Theory of Science'). Causal claims without commensurate budget allocation are implausible or aspirational, not operational.",
              "epistemological_stance": "Critical realist - causal mechanisms have generative powers but are actualized only when material conditions (budget, personnel) are met",
              "theoretical_framework": [
                "Bhaskar (1975) 'Realist Theory of Science' - stratified ontology: mechanisms (real), events (actual), observations (empirical)",
                "Cartwright (1999) 'The Dappled World' - causal capacities require enabling conditions (INUS conditions)",
                "Elster (2015) 'Explaining Social Behavior' - rational action requires means (resources) + opportunity",
                "Public Finance Theory (Musgrave & Musgrave 1989) - budget allocations reveal revealed preferences and operational priorities"
              ],
              "justification": "Q015 evaluates mechanism articulation. Financial consistency check tests mechanism operationalizability: if 'capacitación de 5,000 mujeres' lacks budget line, mechanism is non-credible."
            },
            "technical_approach": {
              "algorithm": "Graph matching of mechanism nodes to budget allocations + plausibility scoring",
              "input": "nx.DiGraph causal_dag, dict budget_data (from Phase 1 financial extraction), list[MechanismNode] mechanisms (product→outcome pathways)",
              "output": "dict[str, FinancialConsistency] with fields: {mechanism_id: str, allocated_budget: float, estimated_cost: float, consistency_score: float, plausibility: 'high'|'medium'|'low'}",
              "steps": [
                "For each mechanism (product→intermediates→outcome path), identify required activities from intermediate nodes (e.g., 'capacitación' requires training program)",
                "Query budget_data for allocations matching activity keywords (e.g., 'programa de capacitación', 'fortalecimiento de habilidades')",
                "Estimate minimum required budget using corpus-derived cost models: e.g., training program for N beneficiaries ≈ $X per capita (from historical PDM analysis)",
                "Compute consistency_score = min(allocated_budget / estimated_cost, 1.0). Score = 1.0 if budget sufficient, < 1.0 if underfunded",
                "Apply Bayesian adjustment: if budget data uncertain or missing, use informative prior P(sufficient_budget | plan_quality, municipality_category) from corpus",
                "Flag mechanisms: consistency > 0.8 'high plausibility', 0.5-0.8 'medium', < 0.5 'low' (resource-constrained, may fail)"
              ],
              "assumptions": [
                "Linear cost scaling: cost estimation assumes linear relationship between beneficiaries and budget (violated if economies/diseconomies of scale)",
                "Budget specificity: budget data is disaggregated enough to match mechanism activities (violated in aggregated budget tables)",
                "No informal resources: method only considers formal budget allocations, ignores volunteer labor, donations, inter-sectoral collaboration (underestimates actual resources)"
              ],
              "limitations": [
                "Cost model uncertainty: corpus-derived cost estimates may not generalize to focal municipality (different labor costs, infrastructure availability)",
                "Missing budget data: if plan lacks detailed budget tables, method falls back to priors (less informative)",
                "Timing mismatch: budget may be allocated across multiple years but mechanism analysis is cross-sectional (method does not model multi-year phasing)"
              ],
              "complexity": "O(m × b) where m = mechanisms, b = budget line items (typically b ≈ 50-100 for municipal PDM)"
            },
            "output_interpretation": {
              "high_consistency": "≥0.8: Mechanism financially plausible - budget allocation commensurate with estimated cost",
              "medium_consistency": "0.5-0.79: Mechanism underfunded - may require efficiency gains or external funding to operationalize",
              "low_consistency": "<0.5: Mechanism severely resource-constrained - likely aspirational, not operational",
              "actionable_insight": "Low-consistency mechanisms → either increase budget allocation or revise mechanism to lower-cost alternative (e.g., group training vs. individual coaching)"
            }
          },
          {
            "method_name": "_build_type_hierarchy",
            "class_name": "CausalExtractor",
            "priority": 18,
            "role": "causal_type_taxonomy_for_mechanism_classification",
            "epistemological_foundation": {
              "paradigm": "Mechanistic Typology + Ontological Hierarchy",
              "ontological_basis": "Mechanisms can be classified by type (e.g., 'skill transfer', 'incentive alignment', 'norm diffusion'). Type hierarchy enables comparing mechanisms across domains and identifying analogical reasoning in plan.",
              "epistemological_stance": "Taxonomic structuralism - causal mechanisms instantiate abstract types; recognizing types enables generalization and cross-domain learning",
              "theoretical_framework": [
                "Hedström & Swedberg (1998) 'Social Mechanisms: An Analytical Approach to Social Theory' - typology of mechanisms (situational, action-formation, transformational)",
                "Craver (2007) 'Explaining the Brain' - mechanistic levels and constitutive relations",
                "Machamer (2004) 'Activities and Causation' - activity types in mechanistic explanation",
                "Woodward (2002) 'What is a Mechanism? A Counterfactual Account' - mechanism individuation via invariant counterfactual relations"
              ],
              "justification": "Q015 requires identifying mechanisms. Type hierarchy enables recognizing mechanism even when plan uses non-standard terminology (e.g., 'empoderamiento' as instance of 'capability enhancement' mechanism type)."
            },
            "technical_approach": {
              "algorithm": "Hierarchical clustering of mechanism descriptions + supervised classification against type ontology",
              "input": "list[InferredMechanism] (from method 25), dict mechanism_type_ontology (prior taxonomy from gender policy literature)",
              "output": "dict[str, str] mapping mechanism_id → mechanism_type; nx.DiGraph type_hierarchy (parent-child relations between types)",
              "steps": [
                "Load mechanism type ontology: e.g., root type 'causal_mechanism' → subtypes {'skill_transfer', 'incentive', 'norm_change', 'resource_provision', 'network_formation'}",
                "For each InferredMechanism, extract textual description of intermediate steps + product/outcome pair",
                "Compute semantic embedding of mechanism description using sentence transformer (e.g., all-MiniLM-L6-v2)",
                "For each type in ontology, retrieve exemplar descriptions from corpus; compute centroid embedding",
                "Classify mechanism to type via nearest centroid in embedding space; assign confidence = cosine_similarity(mechanism_embedding, type_centroid)",
                "Build type hierarchy graph: add edges parent_type → child_type from ontology; annotate nodes with count of mechanisms assigned to each type",
                "Flag over-represented types (e.g., 'skill_transfer' dominates but 'norm_change' absent) as potential blind spots in plan's causal reasoning"
              ],
              "assumptions": [
                "Type separability: mechanism types are distinguishable in semantic space (violated if types are conceptually overlapping)",
                "Ontology completeness: prior type taxonomy covers mechanisms in focal plan (violated if plan proposes novel mechanism types)",
                "Embedding validity: sentence embeddings capture mechanistic content (may fail for highly technical or domain-specific language)"
              ],
              "limitations": [
                "Supervised bias: classification depends on prior ontology - cannot discover truly novel mechanism types beyond taxonomy",
                "Embedding coarseness: semantic similarity may conflate distinct mechanisms with similar wording",
                "Monolingual: method assumes Spanish text; cross-lingual plans require multilingual embeddings"
              ],
              "complexity": "O(m × t) where m = mechanisms, t = types in ontology (typically t ≈ 20-30 for gender policy)"
            },
            "output_interpretation": {
              "diverse_types": "≥4 distinct types: Plan employs varied causal mechanisms - sophisticated theory of change",
              "narrow_types": "1-2 types: Plan relies on single mechanism class (e.g., only resource provision) - limited causal repertoire",
              "missing_critical_types": "Type 'norm_change' absent but expected for gender policy: Plan may neglect socio-cultural mechanisms",
              "actionable_insight": "Type gaps → recommend incorporating mechanisms from under-represented types (e.g., add norm diffusion mechanisms to complement skill transfer)"
            }
          }
        ],
        "method_combination_logic": {
          "combination_strategy": "Sequential causal inference pipeline with Bayesian evidence fusion",
          "rationale": "Q015 requires comprehensive causal mechanism analysis spanning multiple inference levels: (1) confounding control, (2) mechanism inference, (3) DAG topology, (4) counterfactual necessity, (5) financial plausibility, (6) type classification. The 25 methods cover this causal pipeline systematically, building from raw text extraction to formal causal models.",
          "evidence_fusion": "Evidence from all 25 methods is synthesized via Bayesian belief network: early methods (1-13) provide evidence for causal links; middle methods (14-17) construct formal DAG; later methods (18-25) validate mechanism properties (necessity, plausibility, type). Final mechanism confidence = product of likelihoods from all contributing methods.",
          "confidence_aggregation": "Final confidence per mechanism = weighted_geometric_mean([conf_method1, conf_method2, ...]) where weights reflect method reliability. Geometric mean penalizes mechanisms with low confidence from any critical method (e.g., counterfactual necessity < 0.3 → mechanism downgraded even if other methods confident).",
          "execution_order": "Methods execute in priority order (1→25). Later methods depend on outputs of earlier methods: (15) DAG construction requires (1) confounders + (10) activity sequences; (8) counterfactuals require (15) DAG; (18) type hierarchy requires (25) inferred mechanisms.",
          "trade_offs": [
            "Comprehensiveness vs. Complexity: 25 methods ensure thorough causal analysis but require ~30-60 seconds per question vs. ~5 seconds for simpler contracts",
            "Precision vs. Recall: Strict causal criteria (counterfactual necessity, financial consistency) increase precision (few false positives) but may miss weakly-articulated mechanisms (lower recall)",
            "Interpretability vs. Sophistication: Bayesian + counterfactual methods are powerful but opaque; human_readable_output compensates via detailed epistemological documentation"
          ]
        }
      }
    }
  },
  "validation_rules": {
    "na_policy": "abort_on_critical",
    "rules": [
      {
        "field": "elements_found",
        "type": "array",
        "must_contain": {
          "count": 2,
          "elements": [
            "conexion_producto_resultado",
            "mecanismo_causal_explicito"
          ]
        },
        "description": "Both required expected_elements must be present for Q015 to pass validation"
      },
      {
        "field": "causal_mechanisms",
        "type": "array",
        "should_contain": [
          {
            "property": "intermediate_steps",
            "minimum": 1
          },
          {
            "property": "posterior_prob",
            "minimum": 0.5
          }
        ],
        "description": "At least one mechanism should have explicit intermediate steps and high confidence"
      }
    ]
  },
  "traceability": {
    "source_file": "data/questionnaire_monolith.json",
    "json_path": "blocks.micro_questions[14]",
    "method_source": "src/farfan_core/core/orchestrator/executors.py:D3_Q5_Executor",
    "method_mapping_source": "executor_methods_mapping.json",
    "ontology_source": "config/canonical_ontologies/policy_areas_and_dimensions.json",
    "source_hash": "c8f7e3d9a5b2f6a8e3c9f7d4e2b5a1c8f6d3e9b4a7c2f5e1d8b6a3c9f7e4d2b",
    "contract_generation_method": "automated_specialization_from_monolith",
    "contract_author": "F.A.R.F.A.N Mechanistic Policy Pipeline",
    "provenance_note": "This contract was generated with full multi-method orchestration support. Enhanced with detailed epistemological documentation following Q001/Q002 best practices. Contract version 3.1.0 incorporates CQVR validation fixes: corrected schema const fields, aligned assembly sources with method provides, increased signal threshold to 0.5, and expanded methodological depth documentation.",
    "source_question_id": "Q015",
    "specialized_from_base_slot": "D3-Q5",
    "specialization_timestamp": "2025-12-13T10:30:00.000000+00:00",
    "cqvr_validated": true,
    "cqvr_score": 85,
    "cqvr_validation_date": "2025-12-13T10:30:00.000000+00:00"
  },
  "error_handling": {
    "on_method_not_found": "raise",
    "on_method_failure": "propagate_with_trace",
    "on_assembly_failure": "propagate_with_trace",
    "failure_contract": {
      "abort_if": [
        "missing_required_element",
        "incomplete_text"
      ],
      "emit_code": "ABORT-Q015-REQ"
    }
  },
  "fallback_strategy": {
    "use_llm_direct": false,
    "use_heuristics": false,
    "note": "No fallback strategies enabled. All failures propagate according to error_handling configuration."
  },
  "test_configuration": {
    "test_files": [
      "tests/core/orchestrator/test_executors_contract.py",
      "tests/core/phases/test_phase2.py"
    ],
    "test_document_fixtures": [
      "tests/fixtures/preprocessed_documents/sample_pdet_plan.json"
    ],
    "expected_test_coverage": ">=90%",
    "integration_test_required": true
  },
  "compatibility": {
    "orchestrator_min_version": "3.0.0",
    "signal_registry_min_version": "2.0.0",
    "method_executor_min_version": "3.0.0",
    "questionnaire_monolith_version": "3.0.0",
    "phase2_types_version": "3.0.0"
  },
  "calibration": {
    "status": "active",
    "note": "Contract does not embed calibration scores. Actual calibration managed via src/farfan_core/core/calibration/ + config/intrinsic_calibration.json + config/fusion_specification.json",
    "source": {
      "intrinsic_calibration": "config/intrinsic_calibration.json",
      "fusion_specification": "config/fusion_specification.json",
      "layer_calibrations_dir": "config/layer_calibrations/",
      "canonical_spec": "canonic_calibration_methods.md"
    }
  },
  "human_answer_structure": {
    "description": "Expected structure of evidence dict after all 25 methods execute and evidence is assembled according to assembly_rules",
    "assembly_flow": {
      "step_1_method_execution": "25 methods execute in priority order, outputs stored with dot-notation keys",
      "step_2_evidence_assembly": "EvidenceAssembler merges outputs according to assembly_rules",
      "step_3_validation": "EvidenceValidator checks against validation_rules",
      "step_4_output_generation": "Phase2QuestionResult constructed with evidence, validation, trace"
    },
    "evidence_structure_schema": {
      "type": "object",
      "description": "Assembled evidence after all methods complete",
      "properties": {
        "elements_found": {
          "type": "array",
          "description": "Required causal elements (conexion_producto_resultado, mecanismo_causal_explicito)",
          "items": {
            "type": "object",
            "properties": {
              "element_id": {
                "type": "string",
                "example": "E-Q015-001"
              },
              "type": {
                "type": "string",
                "enum": [
                  "conexion_producto_resultado",
                  "mecanismo_causal_explicito"
                ]
              },
              "product": {
                "type": "string",
                "example": "mujeres capacitadas"
              },
              "outcome": {
                "type": "string",
                "example": "aumento de ingresos"
              },
              "mechanism_steps": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "confidence": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "source_method": {
                "type": "string",
                "example": "BayesianMechanismInference.infer_mechanisms"
              },
              "sentence_id": {
                "type": "integer"
              },
              "context": {
                "type": "string"
              }
            }
          }
        },
        "causal_mechanisms": {
          "type": "array",
          "description": "Inferred causal mechanisms from Bayesian and DAG methods",
          "items": {
            "type": "object",
            "properties": {
              "mechanism_id": {
                "type": "string"
              },
              "product": {
                "type": "string"
              },
              "intermediate_steps": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "outcome": {
                "type": "string"
              },
              "posterior_prob": {
                "type": "number",
                "minimum": 0,
                "maximum": 1
              },
              "necessity_score": {
                "type": "number",
                "description": "Counterfactual necessity from method 8"
              },
              "financial_consistency": {
                "type": "number",
                "description": "Budget plausibility from method 9"
              },
              "mechanism_type": {
                "type": "string",
                "description": "Classified type from method 18"
              }
            }
          }
        },
        "confidence_scores": {
          "type": "array",
          "description": "Aggregated confidence from all methods",
          "items": {
            "type": "number",
            "minimum": 0,
            "maximum": 1
          }
        },
        "causal_dag": {
          "type": "object",
          "description": "Graph representation from method 15",
          "properties": {
            "nodes": {
              "type": "array"
            },
            "edges": {
              "type": "array"
            },
            "path_count": {
              "type": "integer"
            }
          }
        }
      }
    }
  }
}
