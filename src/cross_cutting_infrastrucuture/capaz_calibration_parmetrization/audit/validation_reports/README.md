# Validation Reports Directory

## Overview

This directory contains all audit and validation reports generated by the COHORT_2024 structural governance system.

## Report Types

### 1. Master Audit Report
**Filename**: `master_audit_report.json`  
**Generated by**: `master_structural_audit.py`  
**Contains**:
- Complete 4-phase audit results
- Initial structural audit findings
- File reorganization actions
- Legacy cleanup summary
- Final verification results
- Overall compliance status

**Structure**:
```json
{
  "metadata": {
    "cohort_id": "COHORT_2024",
    "audit_timestamp": "ISO-8601 timestamp",
    "execution_mode": "live" | "dry_run"
  },
  "phase1_initial_audit": { ... },
  "phase2_reorganization": { ... },
  "phase3_cleanup": { ... },
  "phase4_verification": { ... },
  "summary": {
    "initial_issues": 0,
    "final_issues": 0,
    "compliant": true,
    "files_cleaned": 0,
    "actions_taken": 0
  }
}
```

### 2. Structural Audit Report
**Filename**: `structural_audit_report.json`  
**Generated by**: `structural_audit.py`  
**Contains**:
- Complete file inventory
- COHORT_2024 compliance status
- Legacy file detection
- Duplicate file identification
- Misplaced file warnings
- Unlabeled file list
- Detailed recommendations

**Structure**:
```json
{
  "audit_metadata": {
    "cohort_id": "COHORT_2024",
    "audit_date": "ISO-8601 timestamp",
    "auditor_version": "1.0.0"
  },
  "summary": {
    "total_files": 0,
    "cohort_2024_files": 0,
    "legacy_files": 0,
    "misplaced_files": 0,
    "unlabeled_files": 0,
    "duplicate_files": 0
  },
  "file_inventory": [ ... ],
  "issues": [ ... ],
  "recommendations": [ ... ]
}
```

### 3. Legacy Cleanup Report
**Filename**: `legacy_cleanup_report.json`  
**Generated by**: `cleanup_legacy_files.py`  
**Contains**:
- List of deleted files
- List of preserved files
- Cleanup summary statistics
- Dry-run vs live execution indicator

**Structure**:
```json
{
  "cleanup_metadata": {
    "cohort_id": "COHORT_2024",
    "cleanup_date": "ISO-8601 timestamp",
    "dry_run": true | false
  },
  "summary": {
    "files_deleted": 0,
    "files_preserved": 0
  },
  "deleted_files": [ ... ],
  "preserved_files": [ ... ]
}
```

### 4. Reorganization Report
**Filename**: `reorganization_report.json`  
**Generated by**: `reorganize_files.py`  
**Contains**:
- Files created
- Directory structure changes
- Configuration generation actions
- Validation results

**Structure**:
```json
{
  "reorganization_metadata": {
    "cohort_id": "COHORT_2024",
    "reorganization_date": "ISO-8601 timestamp",
    "dry_run": true | false
  },
  "summary": {
    "total_actions": 0
  },
  "actions": [ ... ]
}
```

## How Reports Are Generated

### Automatic Generation
All audit scripts automatically generate reports in this directory:

```bash
# Master audit creates master_audit_report.json
python master_structural_audit.py

# Structural audit creates structural_audit_report.json
python structural_audit.py

# Cleanup creates legacy_cleanup_report.json
python cleanup_legacy_files.py

# Reorganization creates reorganization_report.json
python reorganize_files.py
```

### Report Retention
- Reports are **not** tracked in git (should be in .gitignore)
- Generate fresh reports after any structural changes
- Archive important reports for compliance history

## Reading Reports

### Command Line (Pretty Print)
```bash
# Pretty print with jq
cat structural_audit_report.json | jq '.'

# Extract summary only
cat master_audit_report.json | jq '.summary'

# Check for issues
cat structural_audit_report.json | jq '.issues'
```

### Python
```python
import json

# Load report
with open('validation_reports/structural_audit_report.json') as f:
    report = json.load(f)

# Check compliance
print(f"Total files: {report['summary']['total_files']}")
print(f"Legacy files: {report['summary']['legacy_files']}")
print(f"Issues: {len(report['issues'])}")
```

## Understanding Report Status

### ✓ Compliant
- No issues found
- All required files present with COHORT_2024 prefix
- No legacy files remaining
- No duplicates or misplaced files

Example summary:
```json
{
  "summary": {
    "total_files": 21,
    "cohort_2024_files": 21,
    "legacy_files": 0,
    "misplaced_files": 0,
    "unlabeled_files": 0,
    "duplicate_files": 0
  },
  "issues": []
}
```

### ⚠ Non-Compliant
- Issues detected
- Legacy files present
- Unlabeled or misplaced files
- Action required

Example summary:
```json
{
  "summary": {
    "total_files": 22,
    "cohort_2024_files": 21,
    "legacy_files": 1,
    "misplaced_files": 0,
    "unlabeled_files": 0,
    "duplicate_files": 1
  },
  "issues": [
    "LEGACY FILES DETECTED: 1 legacy files require deletion",
    "DUPLICATE: Multiple versions of fusion_weights.json found"
  ]
}
```

## Report Analysis Workflow

### 1. Run Initial Audit
```bash
python structural_audit.py
```

### 2. Review Report
```bash
cat validation_reports/structural_audit_report.json | jq '.summary'
```

### 3. Check for Issues
```bash
cat validation_reports/structural_audit_report.json | jq '.issues'
```

### 4. Review Recommendations
```bash
cat validation_reports/structural_audit_report.json | jq '.recommendations'
```

### 5. Take Action
Based on recommendations:
- Run `cleanup_legacy_files.py --execute` for legacy files
- Run `reorganize_files.py --execute` for missing files
- Run `master_structural_audit.py --execute` for complete remediation

### 6. Verify Compliance
```bash
python structural_audit.py
cat validation_reports/structural_audit_report.json | jq '.summary.legacy_files'
# Should return: 0
```

## CI/CD Integration

### Pre-commit Hook
```bash
#!/bin/bash
cd src/cross_cutting_infrastrucuture/capaz_calibration_parmetrization
python structural_audit.py > /dev/null 2>&1
EXIT_CODE=$?

if [ $EXIT_CODE -ne 0 ]; then
    echo "❌ Structural audit failed. Check validation_reports/structural_audit_report.json"
    exit 1
fi

echo "✅ Structural audit passed"
exit 0
```

### GitHub Actions
```yaml
- name: Run Structural Audit
  run: |
    cd src/cross_cutting_infrastrucuture/capaz_calibration_parmetrization
    python structural_audit.py
    
- name: Upload Audit Report
  uses: actions/upload-artifact@v2
  with:
    name: audit-report
    path: src/cross_cutting_infrastrucuture/capaz_calibration_parmetrization/validation_reports/
```

## Troubleshooting

### Report Not Generated
- Ensure script ran without errors
- Check write permissions on validation_reports/ directory
- Verify parent directory exists

### Report Shows Issues
- Review issues list in detail
- Follow recommendations provided
- Run appropriate remediation script
- Re-run audit to verify

### Old Reports Present
- Delete old reports before running new audit
- Or rename with timestamp for archival

## Best Practices

1. **Run Before Commit**: Always run structural audit before committing changes
2. **Review Reports**: Don't just check exit codes, review actual report content
3. **Archive Important Reports**: Keep reports for major milestones
4. **Clean Regularly**: Delete old reports to avoid confusion
5. **Automate**: Integrate into CI/CD pipeline

## Report Naming Convention

### Standard Names
- `master_audit_report.json` - Always overwrites
- `structural_audit_report.json` - Always overwrites
- `legacy_cleanup_report.json` - Always overwrites
- `reorganization_report.json` - Always overwrites

### Timestamped Archives (Manual)
```bash
# Archive with timestamp
cp structural_audit_report.json "structural_audit_$(date +%Y%m%d_%H%M%S).json"
```

## Report Retention Policy

- **Active Reports**: Keep latest run only
- **Archived Reports**: Optional, for compliance history
- **Git Tracking**: NO - reports should not be in git
- **Cleanup**: Delete after verification or archive as needed

---

**Directory Purpose**: Audit report storage  
**Update Frequency**: On-demand (per audit run)  
**Retention**: Latest only (archive manually if needed)
