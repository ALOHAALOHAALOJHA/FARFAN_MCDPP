{
  "_cohort_metadata": {
    "cohort_id": "COHORT_2024",
    "creation_date": "2024-12-15T00:00:00+00:00",
    "wave_version": "REFACTOR_WAVE_2024_12",
    "updated": "2025-12-09T00:00:00+00:00"
  },
  "_metadata": {
    "version": "2.1.0",
    "description": "Complete Intrinsic Calibration Rubric with decision automaton and scoring rules",
    "spec_reference": "CALIBRATION_CANONICAL_COHERENCE_ANALYSIS.md",
    "last_updated": "2025-12-09T00:00:00Z",
    "authority": "Doctrina SIN_CARRETA",
    "changelog": "v2.1.0: Full consolidation with verb taxonomy, exclusion patterns, and Q1/Q2/Q3 automaton"
  },
  "formulas": {
    "b_theory": {
      "formula": "b_theory = 0.4 * statistical_validity + 0.3 * logical_consistency + 0.3 * appropriate_assumptions",
      "weights": {
        "statistical_validity": 0.4,
        "logical_consistency": 0.3,
        "appropriate_assumptions": 0.3
      }
    },
    "b_impl": {
      "formula": "b_impl = 0.35 * test_coverage + 0.25 * type_annotations + 0.25 * error_handling + 0.15 * documentation",
      "weights": {
        "test_coverage": 0.35,
        "type_annotations": 0.25,
        "error_handling": 0.25,
        "documentation": 0.15
      }
    },
    "b_deploy": {
      "formula": "b_deploy = 0.4 * validation_runs + 0.35 * stability_coefficient + 0.25 * failure_rate",
      "weights": {
        "validation_runs": 0.4,
        "stability_coefficient": 0.35,
        "failure_rate": 0.25
      }
    },
    "intrinsic_score": {
      "formula": "intrinsic_score = 0.4 * b_theory + 0.35 * b_impl + 0.25 * b_deploy",
      "weights": {
        "b_theory": 0.4,
        "b_impl": 0.35,
        "b_deploy": 0.25
      }
    }
  },
  "decision_automaton": {
    "description": "3-question decision tree for determining calibration requirements",
    "version": "1.1.0",
    "logic": "requires_calibration = (Q1 OR Q2 OR Q3) AND NOT excluded",
    "questions": {
      "Q1": {
        "question": "Is the method analytically active?",
        "description": "Method performs computation, scoring, or analysis that affects outputs",
        "detection_verbs": [
          "compute",
          "calculate",
          "score",
          "evaluate",
          "analyze",
          "assess",
          "infer",
          "estimate",
          "predict",
          "classify",
          "aggregate",
          "extract",
          "generate",
          "process",
          "transform",
          "validate",
          "measure",
          "rank"
        ],
        "check_locations": [
          "method_name",
          "docstring"
        ]
      },
      "Q2": {
        "question": "Is the method parametric?",
        "description": "Method has configurable parameters that affect behavior or outputs",
        "detection_keywords": [
          "threshold",
          "weight",
          "alpha",
          "beta",
          "prior",
          "confidence",
          "tolerance",
          "epsilon",
          "learning_rate",
          "temperature",
          "scale"
        ],
        "detection_verbs": [
          "configure",
          "set",
          "adjust",
          "tune",
          "apply",
          "load"
        ]
      },
      "Q3": {
        "question": "Is the method safety-critical?",
        "description": "Method affects data integrity, security, or system stability",
        "safety_verbs": [
          "validate",
          "verify",
          "check",
          "assert",
          "ensure",
          "guard",
          "protect",
          "record",
          "log",
          "audit",
          "enforce"
        ],
        "critical_layers": [
          "core",
          "analyzer",
          "score",
          "executor",
          "orchestrator"
        ]
      }
    }
  },
  "exclusion_patterns": {
    "description": "Patterns that exclude methods from calibration",
    "patterns": [
      {
        "type": "name_prefix",
        "pattern": "__",
        "reason": "Dunder methods are Python internals"
      },
      {
        "type": "name_pattern",
        "pattern": "^_[a-z]+_helper$",
        "reason": "Internal helper methods"
      },
      {
        "type": "decorator",
        "pattern": "@property",
        "reason": "Property accessors do not require calibration"
      },
      {
        "type": "decorator",
        "pattern": "@staticmethod",
        "reason": "Static utility methods without state"
      },
      {
        "type": "class_suffix",
        "pattern": "TypedDict",
        "reason": "Type definitions, not methods"
      }
    ]
  },
  "scoring_rules": {
    "b_theory_components": {
      "statistical_validity": {
        "keywords": [
          "bayesian",
          "regression",
          "probability",
          "inference",
          "distribution",
          "variance",
          "correlation",
          "hypothesis",
          "significance",
          "stochastic"
        ],
        "scoring": {
          ">=3_keywords": 1.0,
          "2_keywords": 0.7,
          "1_keyword": 0.4,
          "0_keywords": 0.0
        }
      },
      "logical_consistency": {
        "criteria": "docstring completeness",
        "scoring": {
          "has_params_and_returns_and_examples": 1.0,
          "has_params_and_returns": 0.7,
          "has_params_only": 0.4,
          "docstring_>50_chars": 0.2,
          "minimal_or_no_docstring": 0.1
        }
      },
      "appropriate_assumptions": {
        "keywords": [
          "assumes",
          "requires",
          "expects",
          "precondition",
          "invariant"
        ],
        "scoring": {
          "explicit_assumptions": 1.0,
          "implicit_assumptions": 0.4,
          "no_assumptions_stated": 0.1
        }
      }
    },
    "b_impl_components": {
      "test_coverage": {
        "default": 0.5,
        "note": "Uses default until actual test coverage is measured"
      },
      "type_annotations": {
        "formula": "(typed_params / total_params) * 0.7 + (0.3 if has_return_type else 0)"
      },
      "error_handling": {
        "low_complexity_<=5": 0.7,
        "medium_complexity_<=10": 0.5,
        "high_complexity_>10": 0.3
      },
      "documentation": {
        "formula": "(0.4 if doc_length > 50 else 0.1) + (0.3 if has_params_doc) + (0.2 if has_returns_doc) + (0.1 if has_examples)"
      }
    },
    "b_deploy_components": {
      "layer_maturity_baseline": {
        "core": 0.8,
        "analyzer": 0.7,
        "score": 0.7,
        "executor": 0.7,
        "processor": 0.6,
        "ingest": 0.6,
        "utility": 0.5,
        "orchestrator": 0.7
      },
      "estimation_formulas": {
        "validation_runs": "layer_maturity * 0.8",
        "stability_coefficient": "layer_maturity * 0.9",
        "failure_rate": "layer_maturity * 0.85"
      }
    }
  },
  "calibration_statuses": {
    "computed": {
      "description": "Method has been calibrated with computed scores",
      "action": "Use intrinsic_score as @b layer"
    },
    "excluded": {
      "description": "Method is explicitly excluded from calibration",
      "action": "Skip calibration, return neutral score 1.0"
    },
    "pending": {
      "description": "Method requires calibration but has not been processed",
      "action": "Use role-based default (typically 0.6)"
    }
  },
  "role_requirements": {
    "SCORE_Q": {
      "min_base_score": 0.7,
      "critical_components": [
        "b_theory",
        "b_impl"
      ]
    },
    "INGEST_PDM": {
      "min_base_score": 0.6,
      "critical_components": [
        "b_impl",
        "b_deploy"
      ]
    },
    "STRUCTURE": {
      "min_base_score": 0.6,
      "critical_components": [
        "b_impl"
      ]
    },
    "EXTRACT": {
      "min_base_score": 0.6,
      "critical_components": [
        "b_impl",
        "b_deploy"
      ]
    },
    "AGGREGATE": {
      "min_base_score": 0.7,
      "critical_components": [
        "b_theory",
        "b_impl"
      ]
    },
    "REPORT": {
      "min_base_score": 0.6,
      "critical_components": [
        "b_impl"
      ]
    },
    "META_TOOL": {
      "min_base_score": 0.7,
      "critical_components": [
        "b_theory",
        "b_impl"
      ]
    },
    "TRANSFORM": {
      "min_base_score": 0.6,
      "critical_components": [
        "b_impl"
      ]
    }
  }
}